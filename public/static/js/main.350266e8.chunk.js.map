{"version":3,"sources":["assets/or.svg","assets/and.svg","assets/nor.svg","assets/nand.svg","assets/xor.svg","assets/nxor.svg","assets/const.svg","assets/button.svg","assets/invertor.svg","assets/buffer.svg","assets/out-contact.svg","services/i18n.js","consts/Parse.consts.js","elements/Pin/Pin.js","elements/Orientation.const.js","elements/Element.js","elements/Or/Or.js","elements/Nor/Nor.js","elements/And/And.js","elements/Nand/Nand.js","elements/Xor/Xor.js","elements/Nxor/Nxor.js","elements/Constant/Constant.js","components/board/board-states.consts.js","elements/Button/Button.js","elements/Junction/Junction.js","elements/Invertor/Invertor.js","elements/Buffer/Buffer.js","elements/Out Contact/OutContact.js","services/elementBuilder.js","elements/Wire/Wire.js","services/pubSub.js","consts/events.consts.js","utils/render.js","services/fileManager.js","services/driveManager.js","components/spinner/spinner.js","components/loading-popup/loading-popup.js","components/button/button.js","components/drive-popup/drive-popup.js","assets/dcb-logo.svg","components/language-selector/language-selector.js","components/main-menu/main-menu.js","components/action-panel/action-panel.js","components/element-details/details.consts.js","components/element-details/element-details.js","components/side-menu/side-menu.js","components/notification/notification.js","consts/groups.consts.js","components/board/board.js","components/file-input/file-input.js","components/file-browser/file-browser.js","App.js","index.js"],"names":["module","exports","resources","en","translation","ru","language","navigator","match","i18n","use","initReactI18next","init","lng","interpolation","escapeValue","PROPS_TO_INCLUDE","PIN_PROPS_TO_INCLUDE","CONNECTOR_PROPS_TO_INCLUDE","UNEDITABLE_PROPS","inContacts","invert1","Pin","el","out","name","this","pins","Array","fill","map","coords","value","undefined","invert","model","helper","helperEnabled","wiredTo","valueUpdate","BehaviorSubject","observable","n","outContacts","props","width","height","originY","y1","availableLen","maxPoints","Math","round","pointsArray","pivotPoint","maxContacts","i","yPositions","floor","min","max","c","indexOf","push","pinPositionsArray","sort","val","x1","x2","y2","type","idx","_","get","opacity","ORIENTATION","DIRECTION","Element","id","signature","className","interactable","signatureSize","setProps","active","subscriptions","signatureModel","helpers","renderFlag","x","y","modelGroup","pinToggleObservable","Subject","interactionModel","num","elementCounter","inPins","outPins","pinIdx","classList","orientation","direction","countBy","pin","set","length","signal","stroke","disablePinHelper","next","enablePinHelper","forEach","arguments","subscription","add","wire","wirePin","console","log","inSub","unsubscribe","enableInPinHelper","inConnector","updateState","outSub","outConnector","enableOutPinHelper","hasIn","Boolean","hasOut","children","getStateColor","isNaN","Number","operation","errorCheck","defaultProps","Or","reduce","result","Nor","And","Nand","Xor","Nxor","Constant","String","color","_children","STATE","EDIT","WIRE","CREATE","INTERACT","LOAD_DATA","DISABLE_MODELING","initialSignal","Button","body","_renderer","elem","onClick","fromEvent","subscribe","boardState","addSubscription","setInteractions","Junction","junctionHelpers","inWires","outWires","errorRegistred","union","signalSource","getCurrentSignalSource","find","remove","sub","globalElObj","globalEl","globalElPinIdx","setErrorState","unsetErrorState","isError","lastWire","inWire","outWire","unsub","Invertor","Buffer","OutContact","elementBuilder","elementMap","create","icon","Map","require","Wire","element","pinNumber","e","sourcePinIdx","signalGoal","getCurrentSignalGoal","goalPinIdx","removeWire","getTotalWired","destroy","vertices","outElement","disableInPinHelper","disableOutPinHelper","pipe","distinctUntilChanged","inElement","setId","PubSub","subsBuffer","params","callback","createEvent","EVENT","SET_BOARD_STATE","BOARD_RESIZE","UPDATE_DATA","TOGGLE_LOADING","SHOW_NOTICE","TOGGLE_GDRIVE_POPUP","TOGGLE_FILE_BROWSER","SET_CURRENT_ELEMENT","MODELING_OFF","Renderer","board","parentElement","getBoundingClientRect","svg","Two","appendTo","render","bind","background","makeGroup","middleground","foreground","data","setFieldSize","style","instantRender","line","makeLine","linewidth","inX","inY","outX","outY","inHelper","renderHelpCircle","outHelper","tempsForJunctions","jgroup","originX","makeCircle","makeRectangle","makeElement","circle","junction","text","styles","makeText","getCoords","xShift","yShift","rect1","rect2","x3","y3","x4","y4","rect3","rect4","removeElementById","rect","outHelpers","inHelpers","invertInCircles","invertOutCircles","renderWire","renderInvertCircle","renderText","size","bodyGroup","inPinsGroup","outPinsGroup","inHelpersGroup","outHelpersGroup","invertInCirclesGroup","invertOutCirclesGroup","signatureGroup","group","interactionGroup","scene","getByClassName","els","clear","update","fileManager","schemeName","getFieldData","elements","pick","DATA_CONSTS","chain","extend","wires","JSON","stringify","saveData","makeFile","document","createElement","setAttribute","encodeURIComponent","display","appendChild","click","removeChild","querySelectorAll","publish","toggle","html2canvas","logging","then","canvas","download","href","toDataURL","getElementById","innerHTML","replace","fileName","exec","clearScene","elementTemp","getCreateFuncByName","renderJunction","renderElement","findElementById","inConnectorId","outConnectorId","pushWire","idStartNumber","res","setIdCounter","file","reader","FileReader","readAsText","onload","loadData","parse","onerror","error","post","location","timeout","ajax","url","method","driveManager","sessionId","Cookies","uuidv4","path","expires","authorize","code","tap","isLoggedIn","user","folderId","fileId","schemeData","Spinner","LoadingPopup","isVisible","status","t","str","i18next","disabled","DrivePopup","state","needAuth","forms","auth","sendCode","response","description","title","closePopup","setState","window","open","link","logout","src","photo","alt","email","authToGdrive","logoutFromGdrive","React","Component","_extends","Object","assign","target","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref","svgRef","viewBox","ref","transform","fillOpacity","strokeWidth","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeDasharray","strokeDashoffset","strokeOpacity","paintOrder","cx","cy","r","ForwardRef","forwardRef","LanguageSelector","visible","clickObserver","clickSubscription","changeLanguage","toggleSelector","prevProps","prevState","snapshot","data-icon","SubList","list","entry","action","hotkey","Options","component","options","option","suboptions","mainMenu","inputVisible","handleBlur","handleTitleClick","input","getElementsByClassName","focus","setSchemeName","placeholder","defaultValue","onBlur","ActionPanel","actions","execAction","DETAILS","inputType","valueType","ElementDetails","currentProp","handleFocus","resetElementState","handleChange","blurSubscription","curEl","currentEl","prop","getElementsByName","test","setInPinInvertState","optionsList","optionsArray","getOptionArray","array","mean","propsKeys","contactsNum","hidden","onFocus","onChange","generateOptions","elementData","getElementData","toLowerCase","GroupElements","handleClick","Group","opened","index","GroupDetails","groups","sideMenu","sliderMoveObservable","mouseUpSliderObservable","sliderMoveSubscription","mouseUpSliderSubscription","menuInitialWidth","originalData","handleMouseDown","mouseUp","slider","preventDefault","menuWidth","pageX","curColumnWidth","column","boardWidth","boardHeight","offsetWidth","offsetHeight","mouseMove","menu","windowWidth","innerWidth","menuHeight","onMouseDown","TYPES","Notification","includes","ElementBase","getIconByName","GROUPS","Board","ghost","down","junctionStartingFlag","junctionEndingFlag","wiresToBuild","startingEl","endingEl","isAnyElementActive","eventSubscriptions","disableWireModels","getAllWireModels","getElement","dragHandler","ghostHelper","startWire","endWire","left","pageY","top","isWireStart","calcWireCoords","findIndex","splice","inEl","outEl","main","prolonged","optimize","connector","elX1","elY1","elX2","elY2","minY","maxY","minX","maxX","deleteWire","chainWire","goal","wiresToReplace","replacementWires","replacement","len","applyHelpers","wireBend","startJunction","endJunction","bend","clone","revertChain","abs","tryProlongWire","sliceWire","wireCoords","removeElement","updateGlobalData","jcoords","firstWire","secondWire","applySlice","inConnectorCoords","outConnectorCoords","start","end","inConnectorName","slength","elength","distanceX1","distanceX2","distanceY1","distanceY2","cloneDeep","scrollIntoView","iterFunc","startFunction","endFunction","domEl","pinMousemove","pinMousedown","pinMouseout","vm","domModel","junctionMousemove","stId","endId","junctionMouseout","junctionMousedown","junctionMouseup","wireBounds","wireClick","handleDelete","keyCode","eraseActiveZone","clickElsewhere","matches","renderActiveWireZone","elementBounds","elementClick","deleteElement","cursor","renderActiveZone","elementMousedown","move","calcCoords","renderGhost","prev","x1m","y1m","x2m","y2m","x1b","y1b","x2b","y2b","orientationCorrection","resetComponent","getElementsByTagName","junctions","shapes","shapesColors","textColors","junctionsColors","shape","getComputedStyle","getPropertyValue","resetData","renderer","setBoardState","FileInput","files","loadFile","setTimeout","accept","FileTree","currentEntry","warning","setCurrentEntry","onDoubleClick","goDeep","FileBrowser","loading","warningMsg","navigateToLoginPopup","close","mode","getFile","fileData","scheme","folder","saveFile","pop","setFolder","last","openFile","listFiles","filter","fullPath","acc","isRoot","isLoading","entryRestriction","noop","goUp","App","values","loadingStatus","isDrivePopupVisible","fsOpened","fsMode","notice","notificationCounter","save","newFile","manageGdrive","toggleFs","saveAsSVG","saveAsPNG","updateData","toggleLoading","showNotice","checkSession","ReactDOM"],"mappings":"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","file":"static/js/main.350266e8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/or.d1e550b4.svg\";","module.exports = __webpack_public_path__ + \"static/media/and.3082a1bb.svg\";","module.exports = __webpack_public_path__ + \"static/media/nor.b0df7711.svg\";","module.exports = __webpack_public_path__ + \"static/media/nand.90156a5e.svg\";","module.exports = __webpack_public_path__ + \"static/media/xor.24ce4487.svg\";","module.exports = __webpack_public_path__ + \"static/media/nxor.a94b65d4.svg\";","module.exports = __webpack_public_path__ + \"static/media/const.ff0935a2.svg\";","module.exports = __webpack_public_path__ + \"static/media/button.7c4fae13.svg\";","module.exports = __webpack_public_path__ + \"static/media/invertor.590f4c64.svg\";","module.exports = __webpack_public_path__ + \"static/media/buffer.ed9f6d1b.svg\";","module.exports = __webpack_public_path__ + \"static/media/out-contact.f2004e70.svg\";","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport enTranslation from '../locale/en.locale';\nimport ruTranslation from '../locale/ru.locale';\n\n// the translations\n// (tip move them in a JSON file and import them)\nconst resources = {\n    en: {\n        translation: enTranslation\n    },\n    ru: {\n        translation: ruTranslation\n    }\n};\n\nconst browserLanguage = navigator.language;\nconst language = browserLanguage.match(/ru/gmi) ? 'ru' : 'en';\n\ni18n\n    .use(initReactI18next) // passes i18n down to react-i18next\n    .init({\n        resources,\n        lng: language,\n\n        interpolation: {\n            escapeValue: false // react already safes from xss\n        }\n    });\n\nexport default i18n;\n","export const PROPS_TO_INCLUDE = [\n    'name',\n    'props',\n    'outContacts',\n    'className',\n    'x',\n    'y',\n    'id',\n    'width',\n    'height',\n    'signature',\n    'signatureSize',\n    'interactable',\n    'originY'\n];\nexport const PIN_PROPS_TO_INCLUDE = [\n    'invert',\n    'value'\n];\nexport const CONNECTOR_PROPS_TO_INCLUDE = [\n    'pin',\n    'type'\n];\n\nexport const UNEDITABLE_PROPS = {\n    inContacts: ['Buffer', 'Invertor', 'OutContact'],\n    invert1: ['Buffer', 'Invertor'],\n};\n","import _ from 'lodash';\nimport {BehaviorSubject} from 'rxjs';\n\nclass Pin {\n    constructor(el, out = false) {\n        if(el.name === 'Wire' || el.name === 'Junction') {\n            this.pins = new Array(1)\n                .fill(null)\n                .map(() => {\n                    return {\n                        coords: null,\n                        value: undefined,\n                        invert: false,\n                        model: null,\n                        helper: null,\n                        helperEnabled: true,\n                        wiredTo: null,\n                        valueUpdate: new BehaviorSubject(undefined),\n                        observable: null,\n                    };\n                });\n        } else {\n            const n = out ? el.outContacts : el.props.inContacts;\n            const width = el.width;\n            const height = el.height;\n            const originY = el.originY;\n            const pinLength = 12;\n            let y1 = 0;\n            let availableLen = height - (2 * originY);\n            const maxPoints = Math.round(availableLen / 10);\n            const pointsArray = new Array(maxPoints);\n            const pivotPoint = Math.round(maxPoints / 2);\n\n            el.maxContacts = maxPoints;\n            for (let i = 0; i < maxPoints; i++) {\n                pointsArray[i] = y1;\n                y1 += 12;\n            }\n            const yPositions = [];\n\n            for (let i = 0; i < Math.floor(n / 2); i++) {\n                let min = pointsArray[maxPoints - 1] + 1;\n                let max = 0;\n                for(let c = 0; c < maxPoints; c++) {\n                    if(pointsArray[c] < min && yPositions.indexOf(pointsArray[c]) < 0) {\n                        min = pointsArray[c]\n                    }\n                    if(pointsArray[c] > max && yPositions.indexOf(pointsArray[c]) < 0) {\n                        max = pointsArray[c];\n                    }\n                }\n                yPositions.push(min, max);\n            }\n\n            if (n % 2 !== 0) {\n                yPositions.push(pointsArray[pivotPoint - 1]);\n            }\n\n            const pinPositionsArray = yPositions\n                .sort()\n                .map((val) => {\n                    val++;\n                    return out ?\n                        {x1: width, y1: val, x2: width + pinLength, y2: val}\n                        : {x1: -pinLength, y1: val, x2: 0, y2: val};\n                });\n            const type = out ? 'outPins' : 'inPins';\n\n            this.pins = new Array(n)\n                .fill(null)\n                .map((val, idx) => {\n                    return {\n                        coords: pinPositionsArray[idx],\n                        value: _.get(el, `${type}.pins.[${idx}].value`, undefined),\n                        model: null,\n                        helper: null,\n                        helperEnabled: true,\n                        wiredTo: _.get(el, `${type}.pins.[${idx}].wiredTo`, null),\n                        invert: _.get(el, `${type}.pins.[${idx}].invert`, false),\n                        valueUpdate: new BehaviorSubject(undefined),\n                        observable: null,\n                    };\n                });\n        }\n    }\n    disablePinHelper(idx) {\n        if(this.pins[idx].helper) {\n            this.pins[idx].helper.opacity = 0;\n            this.pins[idx].helperEnabled = false;\n        }\n    }\n\n    enablePinHelper(idx) {\n        if(this.pins[idx].helper) {\n            this.pins[idx].helper.opacity = 0;\n            this.pins[idx].helperEnabled = true;\n        }\n    }\n}\n\nexport default Pin;\n","export const ORIENTATION = {\n    VERTICAL: 'vertical',\n    HORIZONTAL: 'horizontal',\n};\n\nexport const DIRECTION = {\n    T2B: 'T2B',\n    B2T: 'B2T',\n    L2R: 'L2R',\n    R2L: 'R2L'\n};\n","import Pin from \"./Pin/Pin\";\nimport _ from 'lodash';\nimport {BehaviorSubject, Subject} from 'rxjs'\nimport {ORIENTATION, DIRECTION} from \"./Orientation.const\";\n\nclass Element {\n    static elementCounter = 0;\n    static boardState;\n\n    static setIdCounter(num) {\n        Element.elementCounter = num;\n    }\n\n    constructor(props) {\n        this.id = props.id;\n        this.name = props.name;\n        this.outContacts = props.outContacts;\n        this.width = props.width;\n        this.height = props.height;\n        this.signature = props.signature || '';\n        this.className = `element-${props.name} element`;\n        this.originY = props.originY || 0;\n        this.interactable = props.interactable || props.name === 'Button';\n        this.signatureSize = props.signatureSize || 24;\n        this.setProps(props.props);\n        this.model = null;\n        this.active = false;\n        this.subscriptions = null;\n        this.signatureModel = null;\n        this.helpers = null;\n        this.renderFlag = new BehaviorSubject(null);\n        this.x = null;\n        this.y = null;\n        this.modelGroup = null;\n        this.pinToggleObservable = new Subject();\n        this.interactionModel = null;\n    }\n\n    setProps(props) {\n        this.props = props;\n        if (this.props.inContacts) {\n            this.inPins = new Pin(this);\n        }\n        if (this.outContacts) {\n            this.outPins = new Pin(this, true);\n        }\n    }\n\n    setInPinInvertState(pinIdx, value) {\n        if(this.inPins) {\n            this.inPins.pins[pinIdx].invert = value;\n        }\n    }\n\n    setId() {\n        if(!this.id) {\n            this.id = this.name + Element.elementCounter;\n            Element.elementCounter++;\n        }\n        if(this.model) {\n            this.model.classList.push(this.id);\n        }\n        if(this.modelGroup) {\n            this.modelGroup.classList.push(this.id);\n        }\n    }\n\n    getCoords() {\n        if(this.model) {\n            return {\n                x1: this.x,\n                y1: this.y,\n                orientation: ORIENTATION.HORIZONTAL,\n                direction: DIRECTION.T2B\n            };\n        }\n    }\n\n    operation() {}\n\n    errorCheck() {\n        const inPins = _.get(this.inPins, 'pins', null);\n        const outPins = _.get(this.outPins, 'pins', null);\n\n        if(inPins) {\n            if(_.countBy(inPins, 'value')['overload']) {\n                _.map(outPins, (pin) => {\n                    return _.set(pin, 'value', 'overload');\n                });\n            }\n            if (_.countBy(inPins, 'value')['undefined'] === inPins.length || _.countBy(inPins, 'value')['null']){\n                _.map(outPins, (pin) => {\n                    return _.set(pin, 'value', null);\n                });\n            }\n        }\n    }\n\n    getStateColor(signal) {\n        let stroke;\n\n        switch (signal) {\n            case 0:\n                stroke = '#006200';\n                break;\n            case 1:\n                stroke = '#00FF00';\n                break;\n            case 'overload':\n                stroke = '#ff7700';\n                break;\n            case undefined:\n                stroke = '#0077ff';\n                break;\n            default:\n                stroke = '#FF0000';\n                break;\n        }\n\n        return stroke;\n    }\n\n    disableInPinHelper(idx) {\n        this.inPins.disablePinHelper(idx);\n        this.pinToggleObservable.next(this.inPins.pins[idx]);\n        this.renderFlag.next();\n    }\n\n    disableOutPinHelper(idx) {\n        this.outPins.disablePinHelper(idx);\n        this.pinToggleObservable.next(this.outPins.pins[idx]);\n        this.renderFlag.next();\n    }\n\n    enableInPinHelper(idx) {\n        this.inPins.enablePinHelper(idx);\n        this.pinToggleObservable.next(this.outPins.pins[idx]);\n        this.renderFlag.next();\n    }\n\n    enableOutPinHelper(idx) {\n        this.outPins.enablePinHelper(idx);\n        this.pinToggleObservable.next(this.outPins.pins[idx]);\n        this.renderFlag.next();\n    }\n\n    addSubscription() {\n        _.forEach(arguments, (subscription) => {\n            if(!this.subscriptions || _.get(this.subscriptions, 'closed', false)) {\n                this.subscriptions = subscription;\n            } else {\n                this.subscriptions.add(subscription);\n            }\n        });\n    }\n\n    destroy() {\n        if(this.outPins){\n            _.forEach(this.outPins.pins, (pin) => {\n                const wire = pin.wiredTo;\n\n                pin.helperEnabled = true;\n\n                if(wire) {\n                    const wirePin = wire.inPins.pins[0];\n\n                    console.log(wire);\n\n                    wire.inSub.unsubscribe();\n                    wire.enableInPinHelper(0);\n                    wirePin.wiredTo = null;\n                    wire.inConnector = null;\n                    wirePin.value = undefined;\n                    wire.updateState();\n                    pin.wiredTo = null;\n                }\n            });\n        }\n\n        if(this.inPins) {\n            _.forEach(this.inPins.pins, (pin) => {\n                const wire = pin.wiredTo;\n\n                pin.helperEnabled = true;\n\n                if(wire) {\n                    const wirePin = wire.outPins.pins[0];\n\n                    wire.outSub.unsubscribe();\n                    wirePin.wiredTo = null;\n                    wire.outConnector = null;\n                    wire.enableOutPinHelper(0);\n                    pin.wiredTo = null;\n                    wire.updateState();\n                }\n            });\n        }\n\n        this.subscriptions.unsubscribe();\n    }\n\n    updateState() {\n        const hasIn = Boolean(this.props.inContacts);\n        const hasOut = Boolean(this.outContacts);\n\n        if(hasIn) {\n            this.inPins.pins.forEach((pin, idx) => {\n                pin.value = _.get(pin,'wiredTo.outPins.pins[0].value', undefined);\n                this.model.children[1].children[idx].stroke = this.getStateColor(pin.value);\n                if(pin.invert && !isNaN(pin.value) && pin.value !== null) {\n                    pin.value = Number(!pin.value);\n                }\n            });\n        }\n        this.operation();\n        this.errorCheck();\n        if(hasOut) {\n            this.outPins.pins.forEach((pin, idx) => {\n                this.model.children[2].children[idx].stroke = this.getStateColor(pin.value);\n\n                pin.valueUpdate.next(pin.value);\n            });\n        }\n        this.renderFlag.next();\n    }\n}\n\nexport default Element;\n","import Element from '../Element';\nimport _ from 'lodash';\n\nconst defaultProps = {\n    name: 'Or',\n    props: {\n        inContacts: 3,\n        fill: '#ffffff',\n    },\n    outContacts: 1,\n    originY: 5,\n    width: 50,\n    height: 60,\n    signature: '1'\n};\n\nclass Or extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    operation() {\n        this.outPins.pins[0].value = Number(_.reduce(this.inPins.pins,(result, pin) => {\n            return Boolean(result || pin.value);\n        }, 0));\n    }\n}\n\n\n\n\nexport default Or;\n","import Element from '../Element';\nimport _ from 'lodash';\n\nconst defaultProps = {\n    name: 'Nor',\n    props: {\n        inContacts: 3,\n        fill: '#ffffff',\n    },\n    originY: 5,\n    outContacts: 1,\n    width: 50,\n    height: 60,\n    signature: '1'\n};\n\nclass Nor extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    setProps(props) {\n        super.setProps(props);\n        this.outPins.pins[0].invert = true;\n    }\n\n    operation() {\n        this.outPins.pins[0].value = Number(!_.reduce(this.inPins.pins,(result, pin) => {\n            return Boolean(result || pin.value);\n        }, 0));\n    }\n}\n\nexport default Nor;\n","import Element from '../Element';\nimport _ from 'lodash';\n\nconst defaultProps = {\n    name: 'And',\n    props: {\n        inContacts: 3,\n        fill: '#ffffff',\n    },\n    outContacts: 1,\n    originY: 5,\n    width: 50,\n    height: 60,\n    signature: '&'\n};\n\nclass And extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    operation() {\n        this.outPins.pins[0].value = Number(_.reduce(this.inPins.pins,(result, pin) => {\n            return Boolean(result && pin.value);\n        }, 1));\n    }\n}\n\n\n\n\nexport default And;\n","import Element from '../Element';\nimport _ from 'lodash';\n\nconst defaultProps = {\n    name: 'Nand',\n    props: {\n        inContacts: 3,\n        fill: '#ffffff',\n    },\n    originY: 5,\n    width: 50,\n    outContacts: 1,\n    height: 60,\n    signature: '&'\n};\n\nclass Nand extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    setProps(props) {\n        super.setProps(props);\n        this.outPins.pins[0].invert = true;\n    }\n\n    operation() {\n        this.outPins.pins[0].value = Number(!_.reduce(this.inPins.pins,(result, pin) => {\n            return Boolean(result && pin.value);\n        }, 1));\n    }\n}\n\nexport default Nand;\n","import Element from '../Element';\nimport _ from \"lodash\";\n\nconst defaultProps = {\n    name: 'Xor',\n    props: {\n        inContacts: 3,\n        fill: '#ffffff',\n    },\n    outContacts: 1,\n    originY: 5,\n    width: 50,\n    height: 60,\n    signature: '=1'\n};\n\nclass Xor extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    operation() {\n        this.outPins.pins[0].value = _.countBy(this.inPins.pins, 'value')['1'] === 1 ? 1 : 0;\n    }\n}\n\nexport default Xor;\n","import Element from '../Element';\nimport _ from \"lodash\";\n\nconst defaultProps = {\n    name: 'Nxor',\n    props: {\n        inContacts: 3,\n        fill: '#ffffff',\n    },\n    outContacts: 1,\n    originY: 5,\n    width: 50,\n    height: 60,\n    signature: '=1'\n};\n\nclass Nxor extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    setProps(props) {\n        super.setProps(props);\n        this.outPins.pins[0].invert = true;\n    }\n\n    operation() {\n        this.outPins.pins[0].value = Number(!(_.countBy(this.inPins.pins, 'value')['1'] === 1 ? 1 : 0));\n    }\n}\n\nexport default Nxor;\n","import Element from '../Element';\n\nconst defaultProps = {\n    name: 'Constant',\n    props: {\n        signal: 0,\n        fill: '#ffffff',\n    },\n    outContacts: 1,\n    originY: 0,\n    width: 26,\n    height: 26,\n    signature: '0',\n    signatureSize: 20\n};\n\nclass Constant extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    setProps(props) {\n        super.setProps(props);\n        this.signature = String(props.signal);\n    }\n\n    operation() {\n        const color = this.getStateColor(this.props.signal);\n\n        this.outPins.pins[0].value = Number(this.props.signal);\n        this.signatureModel.stroke = color;\n        this.signatureModel.fill = color;\n        this.model._children[0].stroke = color;\n    }\n}\n\n\n\n\nexport default Constant;\n","const STATE = {\n    EDIT: 'edit',\n    WIRE: 'wire',\n    CREATE: 'create',\n    INTERACT: 'interact',\n    LOAD_DATA: 'load',\n    DISABLE_MODELING: 'modeling-disabled'\n};\n\nexport default STATE;\n","import Element from '../Element'\nimport STATE from '../../components/board/board-states.consts';\nimport {fromEvent} from \"rxjs\";\n\nconst defaultProps = {\n    name: 'Button',\n    props: {\n        initialSignal: 0,\n        fill: '#fff6fc',\n    },\n    outContacts: 1,\n    interactable: true,\n    originY: 0,\n    width: 26,\n    height: 26,\n    signature: '0',\n    signatureSize: 20,\n};\n\nclass Button extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    setInteractions() {\n        const body = this.interactionModel._renderer.elem;\n        const onClick = fromEvent(body, 'click')\n            .subscribe(() => {\n                if(Element.boardState === STATE.INTERACT){\n                    this.props.initialSignal = Number(!this.props.initialSignal);\n                    super.updateState();\n                }\n            });\n\n        this.addSubscription(onClick);\n    }\n\n    updateState() {\n        super.updateState();\n        this.setInteractions();\n        this.updateState = super.updateState;\n    }\n\n    operation() {\n        const signal = this.props.initialSignal;\n\n        this.outPins.pins[0].value = signal;\n        this.signatureModel.stroke = this.getStateColor(signal);\n        this.signatureModel.fill = this.getStateColor(signal);\n        this.signatureModel.value = String(signal);\n    }\n}\n\nexport default Button;\n","import Element from '../Element';\nimport _ from 'lodash';\nimport Pin from '../Pin/Pin';\n\nconst defaultProps = {\n    name: 'Junction',\n    props: {\n        fill: '#000000',\n    }\n};\n\nclass Junction extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n        this.inConnector = [];\n        this.outConnector = [];\n        this.model = null;\n        this.outPins = new Pin(this);\n        this.inPins = new Pin(this);\n        this.junctionHelpers = [];\n        this.inWires = [];\n        this.outWires = [];\n        this.errorRegistred = false;\n    }\n\n    getTotalWired() {\n        return _.union(this.inWires, this.outWires).length;\n    }\n\n    pushWire(wire) {\n        const signalSource = wire.getCurrentSignalSource();\n\n        if(signalSource && signalSource.el.id !== this.id) {\n            this.inWires.push(wire);\n            wire.outConnector = {el: this, pin: 0, type: 'in'};\n        } else {\n            this.outWires.push(wire);\n            wire.inConnector = {el: this, pin: 0, type: 'out'};\n        }\n    }\n\n    removeWire(wire) {\n        if(_.find(this.inWires, wire)) {\n            _.remove(this.inWires, val => val.id === wire.id);\n        }\n        if(_.find(this.outWires, wire)) {\n            _.remove(this.outWires, val => val.id === wire.id);\n        }\n    }\n\n    setErrorState() {\n        _.forEach(this.inWires, (sub) => {\n            const globalElObj = sub.getCurrentSignalSource();\n\n            if(globalElObj && this.model) {\n                const globalEl = globalElObj.el;\n                const globalElPinIdx = globalElObj.pin;\n                const pin = _.get(globalEl, `outPins.pins[${globalElPinIdx}]`, null);\n\n                if(globalEl.name === 'Junction') {\n                    globalEl.model.stroke = this.getStateColor(null);\n                    globalEl.model.fill = this.getStateColor(null);\n                    globalEl.setErrorState();\n                } else if(globalEl.name !== 'Wire') {\n                    globalEl.model.children[2].children[globalElPinIdx].stroke = this.getStateColor(null);\n                }\n\n                for (let el = pin.wiredTo; _.get(el, 'name', null) === 'Wire' && el; el = el.outConnector.el) {\n                    el.model.stroke = this.getStateColor(null);\n                }\n            }\n        });\n    }\n\n    unsetErrorState() {\n        _.forEach(this.inWires, (sub) => {\n            const globalElObj = sub.getCurrentSignalSource();\n\n            if(globalElObj && this.model) {\n                const globalEl = globalElObj.el;\n                const globalElPinIdx = globalElObj.pin;\n                const pin = _.get(globalEl, `outPins.pins[${globalElPinIdx}]`, null);\n\n                if(globalEl.name === 'Junction') {\n                    globalEl.model.stroke = this.getStateColor(pin.value);\n                    globalEl.model.fill = this.getStateColor(pin.value);\n                    globalEl.unsetErrorState();\n                } else if (globalEl.name !== 'Wire') {\n                    globalEl.model.children[2].children[globalElPinIdx].stroke = this.getStateColor(pin.value);\n                }\n\n                for (let el = pin.wiredTo; _.get(el, 'name', null) === 'Wire'; el = el.outConnector.el) {\n                    el.model.stroke = this.getStateColor(pin.value);\n                }\n            }\n        });\n    }\n\n    operation() {\n        const value = _.get(this.inWires[0],'outPins.pins[0].value', undefined);\n        let isError = false;\n        let signal = value;\n\n        _.forEach(this.inWires, (sub) => {\n            const val = _.get(sub, 'outPins.pins[0].value');\n\n            if(val !== value) {\n                isError = true;\n            }\n        });\n\n        if (isError) {\n            signal = null;\n            this.errorRegistred = true;\n            this.setErrorState();\n        }\n        this.outPins.pins[0].value = signal;\n        if(this.model) {\n            _.forEach(this.outWires, (sub) => {\n                let lastWire = sub;\n\n                for (let el = lastWire; el.outConnector && _.get(el, 'outConnector.el.name', null) === 'Wire'; el = el.outConnector.el) {\n                    lastWire = el.outConnector.el;\n                }\n                _.set(lastWire, 'outPins.pins[0].value', signal);\n            });\n        }\n        this.outPins.pins[0].valueUpdate.next(signal);\n        if(this.model) {\n            this.model.fill = this.getStateColor(signal);\n            this.model.stroke = this.getStateColor(signal);\n        }\n    }\n\n    destroy() {\n        if(this.inWires.length === 1 && this.outWires.length === 1) {\n            const inWire = this.inWires[0];\n            const outWire = this.outWires[0];\n\n            inWire.unsub();\n            outWire.unsub();\n            inWire.outConnector = {el: outWire, pin: 0, type: 'in'};\n            outWire.inConnector = {el: inWire, pin: 0, type: 'out'};\n            inWire.wire();\n            outWire.wire();\n            this.inWires = [];\n            this.outWires = [];\n            this.model.remove();\n        }\n        this.subscriptions.unsubscribe();\n    }\n\n    updateState() {\n        if(this.errorRegistred) {\n            this.errorRegistred = false;\n            this.unsetErrorState();\n        }\n        this.operation();\n        this.renderFlag.next();\n    }\n}\n\nexport default Junction;\n","import Nor from '../Nor/Nor';\n\nconst defaultProps = {\n    name: 'Invertor',\n    props: {\n        inContacts: 1,\n        fill: '#ffffff',\n    },\n    originY: 5,\n    outContacts: 1,\n    width: 38,\n    height: 38,\n    signature: '1'\n};\n\nclass Invertor extends Nor {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n}\n\nexport default Invertor;\n","import Or from '../Or/Or';\n\nconst defaultProps = {\n    name: 'Buffer',\n    props: {\n        inContacts: 1,\n        fill: '#ffffff',\n    },\n    originY: 5,\n    outContacts: 1,\n    width: 38,\n    height: 38,\n    signature: '1'\n};\n\nclass Buffer extends Or {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n}\n\nexport default Buffer;\n","import Element from '../Element'\n\nconst defaultProps = {\n    name: 'OutContact',\n    props: {\n        fill: '#fff6fc',\n        inContacts: 1,\n    },\n    interactable: false,\n    outContacts: 0,\n    originY: 0,\n    width: 26,\n    height: 26,\n    signature: '0',\n    signatureSize: 20,\n};\n\nclass OutContact extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n    }\n\n    operation() {\n        const signal = this.inPins.pins[0].value;\n\n        this.signatureModel.stroke = this.getStateColor(signal);\n        this.signatureModel.fill = this.getStateColor(signal);\n        if(signal === 0 || signal) {\n            this.signatureModel.value = String(signal);\n        } else {\n            this.signatureModel.value = 'x';\n        }\n    }\n}\n\nexport default OutContact;\n","import Or from \"../elements/Or/Or\";\nimport Nor from \"../elements/Nor/Nor\";\nimport And from \"../elements/And/And\";\nimport Nand from \"../elements/Nand/Nand\";\nimport Xor from \"../elements/Xor/Xor\";\nimport Nxor from \"../elements/Nxor/Nxor\";\nimport Constant from \"../elements/Constant/Constant\";\nimport Button from \"../elements/Button/Button\";\nimport Junction from \"../elements/Junction/Junction\";\nimport Invertor from \"../elements/Invertor/Invertor\";\nimport Buffer from \"../elements/Buffer/Buffer\";\nimport OutContact from '../elements/Out Contact/OutContact';\n\nclass elementBuilder {\n    static elementMap = new Map([\n        ['Or', {create: (props) => new Or(props), icon: require('../assets/or.svg')}],\n        ['And', {create: (props) => new And(props), icon: require('../assets/and.svg')}],\n        ['Nor', {create: (props) => new Nor(props), icon: require('../assets/nor.svg')}],\n        ['Nand', {create: (props) => new Nand(props), icon: require('../assets/nand.svg')}],\n        ['Xor', {create: (props) => new Xor(props), icon: require('../assets/xor.svg')}],\n        ['Nxor', {create: (props) => new Nxor(props), icon: require('../assets/nxor.svg')}],\n        ['Constant', {create: (props) => new Constant(props), icon: require('../assets/const.svg')}],\n        ['Button', {create: (props) => new Button(props), icon: require('../assets/button.svg')}],\n        ['Junction', {create: (props) => new Junction(props), icon: null}],\n        ['Invertor', {create: (props) => new Invertor(props), icon: require('../assets/invertor.svg')}],\n        ['Buffer', {create: (props) => new Buffer(props), icon: require('../assets/buffer.svg')}],\n        ['OutContact', {create: (props) => new OutContact(props), icon: require('../assets/out-contact.svg')}]\n    ]);\n\n    static getCreateFuncByName(name){\n        return elementBuilder.elementMap.get(name).create;\n    }\n\n    static getIconByName(name) {\n        return elementBuilder.elementMap.get(name).icon;\n    }\n}\n\nexport default elementBuilder;\n","import Element from '../Element';\nimport _ from 'lodash';\nimport Pin from '../Pin/Pin';\nimport {distinctUntilChanged} from \"rxjs/operators\";\nimport {ORIENTATION, DIRECTION} from \"../Orientation.const\";\n\nconst defaultProps = {\n    name: 'Wire',\n    props: {\n        fill: '#000000',\n    }\n};\n\nclass Wire extends Element {\n    constructor(props) {\n        props ? super(props) : super(defaultProps);\n        this.inConnector = null;\n        this.outConnector = null;\n        this.model = null;\n        this.outPins = new Pin(this);\n        this.inPins = new Pin(this);\n        this.junctionHelpers = [];\n        this.inSub = null;\n        this.outSub = null;\n    }\n\n    updateState() {\n        const element = _.get(this.inConnector, 'el');\n        const pinNumber = _.get(this.inConnector, 'pin');\n        const signal = _.get(element, `outPins.pins[${pinNumber}].value`, undefined);\n\n        this.inPins.pins[0].value = signal;\n        this.outPins.pins[0].value = signal;\n        this.model.stroke = this.getStateColor(signal);\n        try {\n            this.outPins.pins[0].valueUpdate.next(signal);\n        } catch (e) {\n            const overload = 'overload';\n            const signalSource = this.getCurrentSignalSource().el;\n            const sourcePinIdx = this.getCurrentSignalSource().pin;\n            const signalGoal = this.getCurrentSignalGoal().el;\n            const goalPinIdx = this.getCurrentSignalGoal().pin;\n\n            signalSource.model.children[2].children[sourcePinIdx].stroke = this.getStateColor(overload);\n            signalGoal.model.children[1].children[goalPinIdx].stroke = this.getStateColor(overload);\n            signalGoal.inPins.pins[goalPinIdx].value = overload;\n            signalSource.outPins.pins[sourcePinIdx].value = overload;\n            for(let el = signalSource.outPins.pins[sourcePinIdx].wiredTo; el.name === 'Wire'; el = el.outConnector.el) {\n                el.model.stroke = this.getStateColor(overload);\n                el.outPins.pins[0].value = overload;\n            }\n        }\n        this.renderFlag.next();\n    }\n\n    unsub() {\n        const inConnector = this.inConnector;\n        const outConnector = this.outConnector;\n        if(outConnector && this.outSub){\n            const element= outConnector.el;\n\n            this.outPins.pins[0].value = undefined;\n            element.updateState();\n            this.outSub.unsubscribe();\n            element.enableInPinHelper(outConnector.pin);\n            if(element.name === 'Junction') {\n                element.removeWire(this);\n                if(element.getTotalWired() === 2) {\n                    element.destroy();\n                }\n            }\n        }\n        if(inConnector && this.inSub) {\n            const element = inConnector.el;\n\n            this.inSub.unsubscribe();\n            element.enableOutPinHelper(inConnector.pin);\n            if(element.name === 'Junction') {\n                element.removeWire(this);\n                if(element.getTotalWired() === 2) {\n                    element.destroy();\n                }\n            }\n        }\n    }\n\n    destroy() {\n        this.unsub();\n        this.subscriptions.unsubscribe();\n    }\n\n    getCoords() {\n        if(this.model) {\n            const vertices = _.get(this.model, 'vertices', null);\n            const coords = {\n                x1: vertices[0].x,\n                y1: vertices[0].y,\n                x2: vertices[1].x,\n                y2: vertices[1].y\n            };\n            let orientation, direction;\n\n            if(coords.x1 === coords.x2) {\n                orientation = ORIENTATION.VERTICAL;\n                direction = coords.y1 > coords.y2 ? DIRECTION.T2B : DIRECTION.B2T;\n            } else if (coords.y1 === coords.y2) {\n                orientation = ORIENTATION.HORIZONTAL;\n                direction = coords.x1 > coords.x2 ? DIRECTION.L2R : DIRECTION.R2L;\n            }\n\n            return {\n                ...coords,\n                orientation,\n                direction\n            }\n        }\n    }\n\n    getCurrentSignalGoal() {\n        let signalGoal;\n\n        for(let el = this; el.name === 'Wire' && el.outConnector; el = el.outConnector.el) {\n            signalGoal = el.outConnector;\n        }\n\n        return _.get(signalGoal, 'el.name', null) ? signalGoal : null;\n    }\n\n    getCurrentSignalSource() {\n        let signalSource;\n\n        for(let el = this; el.name === 'Wire' && el.inConnector; el = el.inConnector.el) {\n           signalSource = el.inConnector;\n        }\n\n        return _.get(signalSource, 'el.name', null) !== 'Wire' ? signalSource : null;\n    }\n\n    wire() {\n        const inConnector = this.inConnector;\n        const outConnector = this.outConnector;\n        // let newHelper = null;\n\n        if(outConnector){\n            const outElement = outConnector.el;\n            const pinNumber = outConnector.pin;\n\n            outElement.disableInPinHelper(pinNumber);\n            this.disableOutPinHelper(0);\n            outElement.inPins.pins[pinNumber].wiredTo = this;\n            if(outElement.name === 'Wire') {\n                outElement.inConnector = {el: this, pin: 0, type: 'out'};\n            }\n            this.outSub = this.outPins.pins[0].valueUpdate\n                .pipe(distinctUntilChanged())\n                .subscribe(() => {\n                    outElement.updateState();\n                });\n        }\n        if(inConnector) {\n            const inElement = inConnector.el;\n            const pinNumber = inConnector.pin;\n\n            this.disableInPinHelper(0);\n            if (inElement.name !== 'Junction') {\n                // newHelper = inElement.outPins.pins[pinNumber].helper;\n                inElement.disableOutPinHelper(pinNumber);\n                // this.junctionHelpers.push(newHelper);\n            } else if (inElement.getTotalWired() === 4) {\n                inElement.disableOutPinHelper(pinNumber);\n            }\n\n            inElement.outPins.pins[pinNumber].wiredTo = this;\n            if(inElement.name === 'Wire') {\n                inElement.outConnector = {el: this, pin: 0, type: 'in'};\n            }\n            this.inSub = inElement.outPins.pins[pinNumber].valueUpdate\n                .pipe(distinctUntilChanged())\n                .subscribe(() => {\n                    this.updateState();\n                });\n        } else {\n            this.updateState();\n        }\n        if(!this.id) {\n            this.setId();\n            // if(newHelper) {\n            //     newHelper.classList.push(this.id + 'bend-helper');\n            // }\n            _.forEach(this.junctionHelpers, (helper) => {\n                helper.classList.push(this.id);\n            });\n            _.forEach(this.inPins.pins, (pin) => {\n                pin.helper.classList.push(this.id);\n            });\n            _.forEach(this.outPins.pins, (pin) => {\n                pin.helper.classList.push(this.id);\n            });\n            // console.log(this.id, newHelper);\n        }\n    }\n\n    //debug function\n    getElement() {\n        return _.get(this.model, '_renderer.elem', null);\n    }\n}\n\nexport default Wire;\n","import {Subject} from \"rxjs\";\n\nclass PubSub {\n    static subsBuffer = {};\n\n    static createEvent(name) {\n        this.subsBuffer[name] = new Subject();\n    }\n\n    static publish(name, params) {\n        this.subsBuffer[name].next(params);\n    }\n\n    static subscribe(name, callback) {\n        this.subsBuffer[name].subscribe(callback);\n    }\n\n    static unsubscribe(name) {\n        this.subsBuffer[name].unsubscribe();\n        this.createEvent(name);\n    }\n}\n\nexport default PubSub;\n","export const EVENT = {\n    SET_BOARD_STATE: 'SET_BOARD_STATE',\n    BOARD_RESIZE: 'BOARD_RESIZE',\n    UPDATE_DATA: 'UPDATE_DATA',\n    TOGGLE_LOADING: 'TOGGLE_LOADING',\n    SHOW_NOTICE: 'SHOW_NOTICE',\n    TOGGLE_GDRIVE_POPUP: 'TOGGLE_GDRIVE_POPUP',\n    TOGGLE_FILE_BROWSER: 'TOGGLE_FILE_BROWSER',\n    SET_CURRENT_ELEMENT: 'SET_CURRENT_ELEMENT',\n    MODELING_OFF: 'MODELING_OFF'\n};\n","import Two from 'two.js';\nimport _ from 'lodash';\nimport PubSub from '../services/pubSub';\nimport {EVENT} from \"../consts/events.consts\";\nimport {DIRECTION, ORIENTATION} from \"../elements/Orientation.const\";\n\nclass Renderer {\n    static init(element) {\n        this.board = element;\n        const {width, height} = this.board.parentElement.getBoundingClientRect();\n\n        this.svg = new Two({width, height}).appendTo(this.board);\n        this.render = this.render.bind(this);\n        this.background = this.svg.makeGroup();\n        this.middleground = this.svg.makeGroup();\n        this.foreground = this.svg.makeGroup();\n        PubSub.subscribe(EVENT.BOARD_RESIZE, (data) => {\n            const {width, height} = data;\n\n            this.setFieldSize(width, height);\n        });\n    }\n\n    static getFieldData() {\n        const {width, height} = this.board.getBoundingClientRect();\n\n        return {width, height};\n    }\n\n    static setFieldSize(width, height) {\n        this.svg.width = width;\n        this.svg.height = height;\n        this.board.style.width = `${width}px`;\n        this.board.style.height = `${height}px`;\n        this.render();\n    }\n\n    static renderWire(wire, x1,y1,x2,y2, instantRender = true) {\n        const line = this.svg.makeLine(x1,y1,x2,y2);\n\n        line.fill = wire.fill || '#000000';\n        line.opacity = 1;\n        line.linewidth = 2;\n        if (wire.className) {\n            line.classList.push(wire.className);\n        }\n\n        wire.model = line;\n        if(wire.name) {\n            wire.renderFlag.subscribe(() => {\n                this.render();\n            });\n            wire.pinToggleObservable.subscribe((pin) => {\n                if(pin.helperEnabled) {\n                    this.foreground.add(pin.helper);\n                } else {\n                    this.background.add(pin.helper);\n                }\n            });\n        }\n        if(wire.className === 'Wire') {\n            const [inX, inY] = wire.inConnector ? [x1, y1] : [x2, y2];\n            const [outX, outY] = wire.inConnector ? [x2, y2] : [x1, y1];\n            const inHelper = this.renderHelpCircle(inX, inY);\n            const outHelper = this.renderHelpCircle(outX, outY);\n            const tempsForJunctions = [];\n\n            this.foreground.add(inHelper);\n            this.foreground.add(outHelper);\n            if (x1 === x2) {\n                // if(wire.inConnector && _.get(wire, 'inConnector.name', null) !== 'Junction') {\n                //     tempsForJunctions.push(this.renderHelpCircle(inX + 1, inY));\n                // }\n                if (y1 < y2) {\n                    for(let y = y1 + 13; y < y2 - 12; y += 12) {\n                        tempsForJunctions.push(this.renderHelpCircle(x1, y));\n                    }\n                } else {\n                    for(let y = y1 - 13; y > y2 + 12; y -= 12) {\n                        tempsForJunctions.push(this.renderHelpCircle(x1, y));\n                    }\n                }\n            } else {\n                // if(wire.inConnector && _.get(wire, 'inConnector.name', null) !== 'Junction') {\n                //     tempsForJunctions.push(this.renderHelpCircle(inX, inY));\n                // }\n                if (x1 < x2) {\n                    for(let x = x1 + 13; x < x2 - 12; x += 12) {\n                        tempsForJunctions.push(this.renderHelpCircle(x, y1));\n                    }\n                } else {\n                    for(let x = x1 - 13; x > x2 + 12; x -= 12) {\n                        tempsForJunctions.push(this.renderHelpCircle(x, y1));\n                    }\n                }\n            }\n            _.forEach(tempsForJunctions, (model) => {\n               wire.junctionHelpers.push(model);\n               this.foreground.add(model);\n            });\n            const jgroup = this.svg.makeGroup(tempsForJunctions);\n            wire.modelGroup = this.svg.makeGroup(line, jgroup, inHelper, outHelper);\n            // if (wire.id) {\n            //     line.classList.push(wire.id);\n            //     group.classList.push(wire.id);\n            // }\n            wire.inPins.pins[0].helper = inHelper;\n            wire.outPins.pins[0].helper = outHelper;\n        }\n        this.background.add(line);\n\n        if(instantRender) {\n            this.render();\n        }\n        return line;\n    }\n\n    static makeElement(element, x, y) {\n        const props = element.props;\n        const className = props.className || element.className;\n        const originY = y + element.height/2 - element.originY;\n        const originX = x + element.width/2;\n        let model = null;\n\n        if (element.name === 'OutContact') {\n            model = this.svg.makeCircle(originX, originY, element.width/2);\n        } else {\n            model = this.svg.makeRectangle(originX, originY, element.width, element.height);\n        }\n\n        model.fill = props.fill;\n        model.opacity = props.opacity || 1;\n        element.x = originX;\n        element.y = originY;\n\n        if (className) {\n            model.classList.push(className);\n        }\n\n        return model;\n    }\n\n    static renderGhost(element, x, y) {\n        const ghost = this.makeElement(element, x, y);\n\n        ghost.className = 'ghost';\n\n        return this.render();\n    }\n\n    static renderHelpCircle (x, y) {\n        const circle = this.svg.makeCircle(x, y, 5);\n\n        circle.fill = '#00000000';\n        circle.stroke = '#14ff53';\n        circle.opacity = 0;\n        circle.className = 'help-circle';\n\n        return circle;\n    }\n\n    static renderInvertCircle(x, y) {\n        const circle = this.svg.makeCircle(x, y, 3.5);\n\n        circle.fill = '#ffffff';\n        circle.stroke = '#000000';\n        circle.classList.push('invert-circle');\n        circle.className = 'invert-circle';\n        circle.linewidth = 1;\n\n        return circle;\n    }\n\n    static renderJunction(junction, x, y) {\n        const circle = this.svg.makeCircle(x, y, 3);\n        const helper = this.renderHelpCircle(x, y);\n\n        circle.className = 'junction-circle';\n        circle.fill = '#000000';\n        this.background.add(circle);\n        junction.model = circle;\n        junction.x = x;\n        junction.y = y;\n        junction.outPins.pins[0].helper = helper;\n        junction.renderFlag.subscribe(() => {\n            this.render();\n        });\n        junction.pinToggleObservable.subscribe((pin) => {\n            if(pin.helperEnabled) {\n                this.foreground.add(pin.helper);\n            } else {\n                this.background.add(pin.helper);\n            }\n        });\n        this.foreground.add(helper);\n\n        return circle;\n    }\n\n    static renderText(text, x, y, styles) {\n        return this.svg.makeText(text, x, y, styles);\n    }\n\n    static renderActiveWireZone(wire) {\n        const coords = wire.getCoords();\n        const {x1, y1, x2, y2, orientation, direction} = coords;\n        let xShift = 0;\n        let yShift = 0;\n\n        if(orientation === ORIENTATION.HORIZONTAL) {\n            xShift = direction === DIRECTION.L2R ? 3 : -3;\n        }\n        if(orientation === ORIENTATION.VERTICAL) {\n            yShift = direction === DIRECTION.T2B ? 3 : -3;\n        }\n        const size = 7;\n        const rect1 = this.svg.makeRectangle(x1 - xShift, y1 - yShift, size, size);\n        const rect2 = this.svg.makeRectangle(x2 + xShift, y2 + yShift, size, size);\n        const activeZone = this.svg.makeGroup(rect1, rect2);\n\n        activeZone.classList.push('active-zone');\n        this.render();\n    }\n\n    static renderActiveZone(element) {\n        if(element.width && element.height) {\n            const {width, height} = element;\n            const x = element.x - element.width/2;\n            const y = element.y + element.height/2;\n            const [x1, y1, x2, y2, x3, y3, x4, y4] = [x, y, x + width, y, x, y - height, x + width, y - height];\n            const shift = 3;\n            const size = 7;\n            const rect1 = this.svg.makeRectangle(x1 - shift, y1 + shift, size, size);\n            const rect2 = this.svg.makeRectangle(x2 + shift, y2 + shift, size, size);\n            const rect3 = this.svg.makeRectangle(x3 - shift, y3 - shift, size, size);\n            const rect4 = this.svg.makeRectangle(x4 + shift, y4 - shift, size, size);\n            const activeZone = this.svg.makeGroup(rect1, rect2, rect3, rect4);\n\n            activeZone.classList.push('active-zone');\n            this.render();\n        }\n    }\n\n    static eraseActiveZone() {\n        this.removeElementById('active-zone');\n    }\n\n    static renderElement(element, x, y) {\n        const rect = this.makeElement(element, x, y);\n        const inPins = [];\n        const outPins = [];\n        const outHelpers = [];\n        const inHelpers = [];\n        const invertInCircles = [];\n        const invertOutCircles = [];\n        const signature = [];\n\n        if(element.inPins) {\n            element.inPins.pins.forEach((val) => {\n                const [x1,y1,x2,y2] = [x + val.coords.x1, y + val.coords.y1, x + val.coords.x2,  y + val.coords.y2];\n\n                inPins.push(this.renderWire({}, x1, y1, x2, y2));\n                if(val.invert) {\n                    invertInCircles.push(this.renderInvertCircle(x2, y2));\n                }\n                inHelpers.push(this.renderHelpCircle(x1, y1));\n            });\n        }\n        if(element.outPins) {\n            element.outPins.pins.forEach((val) => {\n                const [x1,y1,x2,y2] = [x + val.coords.x1, y + val.coords.y1, x + val.coords.x2,  y + val.coords.y2];\n\n                outPins.push(this.renderWire({}, x1, y1, x2, y2));\n                if(val.invert) {\n                    invertOutCircles.push(this.renderInvertCircle(x1, y1));\n                }\n                outHelpers.push(this.renderHelpCircle(x2, y2));\n            });\n        }\n        if(element.signature) {\n            const text = this.renderText(element.signature, x + element.width/2, y + 15);\n\n            text.size = element.signatureSize;\n            element.signatureModel = text;\n\n            signature.push(text);\n        }\n        const bodyGroup = this.svg.makeGroup(rect);\n        const inPinsGroup = this.svg.makeGroup(inPins);\n        const outPinsGroup = this.svg.makeGroup(outPins);\n        const inHelpersGroup = this.svg.makeGroup(inHelpers);\n        const outHelpersGroup = this.svg.makeGroup(outHelpers);\n        const invertInCirclesGroup = this.svg.makeGroup(invertInCircles);\n        const invertOutCirclesGroup = this.svg.makeGroup(invertOutCircles);\n        const signatureGroup = this.svg.makeGroup(signature);\n        const group = this.svg.makeGroup(\n            bodyGroup,\n            inPinsGroup,\n            outPinsGroup,\n            inHelpersGroup,\n            outHelpersGroup,\n            invertInCirclesGroup,\n            invertOutCirclesGroup,\n            signatureGroup\n        );\n        if (element.id) {\n            rect.classList.push(element.id);\n            group.classList.push(element.id);\n        }\n        group.className = element.className;\n        if (element.interactable) {\n            const interactionGroup = this.svg.makeGroup(rect, signatureGroup);\n\n            interactionGroup.className = element.className;\n            group.add(interactionGroup);\n            element.interactionModel = interactionGroup;\n        }\n\n        element.model = group;\n\n        _.forEach(inPins, (val, idx) => {\n            element.inPins.pins[idx].model = val;\n            element.inPins.pins[idx].helper = inHelpers[idx];\n        });\n        _.forEach(outPins, (val, idx) => {\n            element.outPins.pins[idx].model = val;\n            element.outPins.pins[idx].helper = outHelpers[idx];\n        });\n        element.renderFlag.subscribe(() => {\n            this.render();\n        });\n        this.foreground.add(group);\n    }\n\n    static getElement(element) {\n        return this.svg.scene.getByClassName(element.props.className || element.className);\n    }\n\n    static removeElementById(id) {\n        const els = this.svg.scene.getByClassName(id);\n\n        _.forEach(els, (el) => {\n            el.remove();\n        });\n        return this.render();\n    }\n\n    static removeElement(element) {\n        const els = this.svg.scene.getByClassName(_.get(element, 'props.className', false) || element.className);\n\n        _.forEach(els, (el) => {\n            el.remove();\n        });\n    }\n\n    static clearScene() {\n        this.svg.clear();\n        this.render();\n        this.background = this.svg.makeGroup();\n        this.middleground = this.svg.makeGroup();\n        this.foreground = this.svg.makeGroup();\n    }\n\n    static render() {\n        this.svg.update();\n    }\n}\n\nexport default Renderer;\n","import _ from \"lodash\";\nimport * as DATA_CONSTS from \"../consts/Parse.consts\";\nimport {Subject} from \"rxjs\";\nimport elementBuilder from \"./elementBuilder\";\nimport Wire from \"../elements/Wire/Wire\";\nimport Element from \"../elements/Element\";\nimport Renderer from '../utils/render';\nimport html2canvas from 'html2canvas';\nimport PubSub from \"./pubSub\";\nimport {EVENT} from \"../consts/events.consts\";\nimport STATE from \"../components/board/board-states.consts\";\n\nclass fileManager {\n    static makeFile(data) {\n        const schemeName = data.schemeName;\n        const {width, height} = Renderer.getFieldData();\n        const elements = _.map(data.elements, (element) => {\n            let inPins = null;\n            let outPins = null;\n\n            if(element.inPins) {\n                inPins = _.map(element.inPins.pins, (pin) => {\n                    return _.pick(pin, DATA_CONSTS.PIN_PROPS_TO_INCLUDE);\n                });\n            }\n            if(element.outPins) {\n                outPins = _.map(element.outPins.pins, (pin) => {\n                    return _.pick(pin, DATA_CONSTS.PIN_PROPS_TO_INCLUDE);\n                });\n            }\n\n            return _.chain(element)\n                .pick(DATA_CONSTS.PROPS_TO_INCLUDE)\n                .extend({inPins, outPins})\n                .value();\n        });\n        const wires = _.map(data.wires, (wire) => {\n            let inPins = null;\n            let outPins = null;\n            let inConnector = null;\n            let outConnector = null;\n            const coords = wire.getCoords();\n\n            if(wire.inPins) {\n                inPins = _.map(\n                    wire.inPins.pins,\n                    (pin) => _.pick(pin, DATA_CONSTS.PIN_PROPS_TO_INCLUDE)\n                );\n            }\n            if(wire.outPins) {\n                outPins = _.map(\n                    wire.outPins.pins,\n                    (pin) => _.pick(pin, DATA_CONSTS.PIN_PROPS_TO_INCLUDE)\n                );\n            }\n            if(wire.inConnector) {\n                inConnector = _.chain(wire.inConnector)\n                    .pick(DATA_CONSTS.CONNECTOR_PROPS_TO_INCLUDE)\n                    .extend({el: _.get(wire.inConnector, 'el.id', '')})\n                    .value();\n            }\n            if(wire.outConnector) {\n                outConnector = _.chain(wire.outConnector)\n                    .pick(DATA_CONSTS.CONNECTOR_PROPS_TO_INCLUDE)\n                    .extend({el: _.get(wire.outConnector, 'el.id', '')})\n                    .value();\n            }\n\n            return _.chain(wire)\n                .pick(DATA_CONSTS.PROPS_TO_INCLUDE)\n                .extend({inPins, outPins, inConnector, outConnector, coords})\n                .value();\n        });\n\n        return JSON.stringify({\n            schemeName,\n            width,\n            height,\n            elements,\n            wires\n        }, null, '\\t');\n    }\n\n    static saveFile(data) {\n        const schemeName = data.schemeName;\n        const saveData = this.makeFile(data);\n        const element = document.createElement('a');\n\n        element.setAttribute('href', 'data:text/json;charset=utf-8,' + encodeURIComponent(saveData));\n        element.setAttribute('download', schemeName + '.dcb');\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n\n        element.click();\n\n        document.body.removeChild(element);\n    }\n\n    static saveAsPNG(name) {\n        const scene = document.querySelectorAll('#board svg')[0];\n\n        PubSub.publish(EVENT.TOGGLE_LOADING, {toggle: true});\n        PubSub.publish(EVENT.SET_BOARD_STATE, STATE.DISABLE_MODELING);\n        PubSub.subscribe(EVENT.MODELING_OFF, () => {\n            html2canvas(scene, {logging: false}).then((canvas) => {\n                const element = document.createElement('a');\n\n                element.download = `${name}.png`;\n                element.href = canvas.toDataURL();\n                element.style.display = 'none';\n                document.body.appendChild(element);\n                element.click();\n                document.body.removeChild(element);\n                PubSub.publish(EVENT.SET_BOARD_STATE, STATE.EDIT);\n                PubSub.publish(EVENT.TOGGLE_LOADING, {toggle: false});\n                PubSub.unsubscribe(EVENT.MODELING_OFF);\n            });\n        });\n    }\n\n    static saveAsSVG(name) {\n        const scene = document.getElementById('board');\n        const style = '<style>.junction-circle {fill: #000000} .ghost {display: none} text {fill: #000000}</style>';\n        const svg = scene.innerHTML\n            .replace(/stroke=\".+?\"/gmi, 'stroke=\"#000000\"')\n            .replace(/(<svg.*?>)/gmi, `$1${style}`);\n        const element = document.createElement('a');\n\n        element.setAttribute('href', 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg));\n        element.setAttribute('download', name + '.svg');\n        element.style.display = 'none';\n        document.body.appendChild(element);\n        element.click();\n        document.body.removeChild(element);\n    }\n\n    static openFile() {\n        const fileInput = document.getElementById('file-input');\n\n        fileInput.click();\n    }\n\n    static async loadData(data, fileName) {\n        const schemeName = /(.+)\\.dcb/.exec(fileName)[1];\n        const elements = [];\n        const width = data.width || 2000;\n        const height = data.height || 2000;\n\n        Renderer.clearScene();\n        Renderer.setFieldSize(width, height);\n\n        _.forEach(data.elements, (elementTemp) => {\n            const create = elementBuilder.getCreateFuncByName(elementTemp.name);\n            const element = create(elementTemp);\n\n            if(elementTemp.name === 'Junction') {\n                Renderer.renderJunction(element, elementTemp.x, elementTemp.y);\n            } else {\n                elementTemp.y -= (element.height/2 - element.originY);\n                elementTemp.x -= element.width/2;\n                Renderer.renderElement(element, elementTemp.x, elementTemp.y);\n            }\n            elements.push(element);\n            element.setId();\n            element.updateState();\n        });\n        const wires = _.map(data.wires, (data) => new Wire(data));\n\n        const findElementById = (id) => {\n            return _.find(_.union(wires, elements), {id});\n        };\n\n        _.forEach(wires, (wire, idx) => {\n            const props = data.wires[idx];\n            const coords = props.coords;\n            const inConnector = props.inConnector;\n            const outConnector = props.outConnector;\n            const inConnectorId = _.get(inConnector, 'el', null);\n            const outConnectorId = _.get(outConnector, 'el', null);\n\n            if(inConnectorId) {\n                inConnector.el = findElementById(inConnectorId);\n                wire.inConnector = inConnector;\n                if(inConnector.el.name === 'Junction') {\n                    inConnector.el.pushWire(wire);\n                }\n            }\n            if(outConnectorId) {\n                outConnector.el = findElementById(outConnectorId);\n                wire.outConnector = outConnector;\n                if(outConnector.el.name === 'Junction') {\n                    outConnector.el.pushWire(wire);\n                }\n            }\n            wire.className = wire.name;\n\n            Renderer.renderWire(wire, coords.x1, coords.y1, coords.x2, coords.y2, false);\n\n            return {\n                schemeName,\n                elements,\n                wires\n            }\n        });\n\n        _.forEach(wires, (wire) => {\n            wire.wire();\n        });\n\n        const idStartNumber = _.chain(wires)\n            .union(elements)\n            .map((val) => Number(/\\d+/.exec(val.id)[0]))\n            .reduce((res, val) => _.max([res, val]), -1)\n            .value();\n\n        Element.setIdCounter(idStartNumber);\n\n        return {\n            schemeName,\n            elements,\n            wires\n        };\n    }\n\n    static loadFile(file) {\n        const reader = new FileReader();\n        const observable = new Subject();\n\n        reader.readAsText(file);\n\n        reader.onload = () => {\n            this.loadData(JSON.parse(String(reader.result)), file.name)\n                .then((data) => {\n                    observable.next(data);\n                });\n        };\n\n        reader.onerror = () => {\n            console.log(reader.error);\n        };\n\n        return observable;\n    }\n\n    static newFile() {\n        const fileInput = document.getElementById('file-input');\n\n        fileInput.value = '';\n        Renderer.clearScene();\n    }\n}\n\nexport default fileManager;\n","import Cookies from 'js-cookie';\nimport { v4 as uuidv4 } from 'uuid';\nimport {ajax} from \"rxjs/ajax\";\nimport {tap} from 'rxjs/operators';\nimport _ from 'lodash';\nimport fileManager from \"./fileManager\";\n\nconst post = (location, body, timeout = 10000) => {\n    return ajax({\n        url: 'http://localhost:3030/' + location,\n        method: 'POST',\n        timeout,\n        body,\n    });\n};\n\nclass driveManager {\n    static sessionId = null;\n    static isLoggedIn = false;\n    static user = null;\n\n    static checkSession() {\n        let sessionId = Cookies.get('session_id');\n\n        if(!sessionId) {\n            sessionId = uuidv4();\n            Cookies.set('session_id', sessionId, {path: '/', expires: 7});\n        }\n\n        this.sessionId = sessionId;\n\n        return this.authorize();\n    }\n\n    static sendCode(code) {\n        return post('code', {\n            code,\n            sessionId: this.sessionId\n        }).pipe(\n            tap((data) => {\n                this.isLoggedIn = _.get(data, 'response.status', false) === 'success';\n                this.user = _.get(data, 'response.user', null);\n            })\n        );\n    }\n\n    static listFiles(folderId) {\n        const sessionId = this.sessionId;\n\n        return post('files', {\n            sessionId,\n            folderId\n        }).pipe(\n            tap((data) => {\n                this.isLoggedIn = !(_.get(data, 'response.status', false) === 'auth');\n                this.user = this.isLoggedIn ? this.user : null;\n            })\n        );\n    }\n\n    static getFile(fileId) {\n        const sessionId = this.sessionId;\n\n        return post('load', {\n            sessionId,\n            fileId\n        }, 20000).pipe(\n            tap((data) => {\n                this.isLoggedIn = !(_.get(data, 'response.status', false) === 'auth');\n                this.user = this.isLoggedIn ? this.user : null;\n            })\n        );\n    }\n\n    static saveFile(data, folderId) {\n        const sessionId = this.sessionId;\n        const schemeData = fileManager.makeFile(data);\n\n        return post('save', {\n            sessionId,\n            schemeData,\n            folderId\n        }, 20000).pipe(\n            tap((data) => {\n                this.isLoggedIn = !(_.get(data, 'response.status', false) === 'auth');\n                this.user = this.isLoggedIn ? this.user : null;\n            })\n        );\n    }\n\n    static logout() {\n        const sessionId = this.sessionId;\n\n        return post('logout', {sessionId})\n            .pipe(\n                tap((data) => {\n                    this.isLoggedIn = !(_.get(data, 'response.status', false) === 'success');\n                    this.user = this.isLoggedIn ? this.user : null;\n                })\n            );\n    }\n\n    static authorize() {\n        const sessionId = this.sessionId;\n\n        return post('auth', {sessionId})\n            .pipe(\n                tap((data) => {\n                    this.isLoggedIn = _.get(data, 'response.status', false) === 'success';\n                    this.user = _.get(data, 'response.user', null);\n                })\n            );\n    }\n}\n\nexport default driveManager;\n","import React from 'react';\n\nfunction Spinner(props) {\n    return <div className={'spinner'}/>;\n}\n\nexport default Spinner;\n","import React from 'react';\nimport Spinner from \"../spinner/spinner\";\n\nfunction LoadingPopup(props) {\n    const {isVisible, status} = props;\n\n    return isVisible ? (\n        <div className=\"fade-curtain\">\n            <div className=\"loading-popup\">\n                <Spinner/>\n                <p className=\"loading-popup__status\">{status}</p>\n            </div>\n        </div>\n    ) : null;\n}\n\nexport default LoadingPopup;\n","import * as React from \"react\";\nimport i18next from 'i18next';\n\nconst t = (str) => i18next.t(str);\n\nfunction Button(props) {\n    const type = props.type || 'regular';\n    const disabled = props.disabled;\n\n    return (\n        <button\n            id={props.id}\n            className={`button button--${disabled ? 'disabled' : type} ${props.className || ''}`}\n            onClick={disabled ? null : props.onClick}\n            disabled={disabled}\n        >\n            {t(props.text)}\n        </button>\n    );\n}\n\nexport default Button;\n","import React from 'react';\nimport Button from '../button/button';\nimport driveManager from \"../../services/driveManager\";\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\nimport i18next from 'i18next';\n\nconst t = (str) => i18next.t(str);\n\nclass DrivePopup extends React.Component{\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            needAuth: false,\n        }\n    }\n\n    sendCode() {\n        const form = document.forms.auth;\n        const code = form.elements.code.value;\n\n        driveManager\n            .sendCode(code)\n            .subscribe((data) => {\n                const status = data.response.status;\n\n                if(status === 'success') {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        description: 'gdrive.success.login',\n                        type: 'success'\n                    });\n                } else {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        title: 'error',\n                        description: 'gdrive.error.code',\n                        type: 'error'\n                    });\n                }\n                this.closePopup();\n                this.setState({needAuth: false});\n            },() => {\n                PubSub.publish(EVENT.SHOW_NOTICE,{\n                    title: 'error',\n                    description: 'gdrive.error.unknown',\n                    type: 'error'\n                });\n                this.closePopup();\n                this.setState({needAuth: false});\n            });\n    }\n    closePopup() {\n        PubSub.publish(EVENT.TOGGLE_GDRIVE_POPUP, false);\n    }\n\n    authToGdrive() {\n        driveManager\n            .authorize()\n            .subscribe((data) => {\n                const {response} = data;\n                const {status} = response;\n\n                if(status === 'success') {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        description: 'gdrive.success.login',\n                        type: 'success'\n                    });\n                    this.closePopup();\n                } else if (status === 'needAuth') {\n                    window.open(response.link, '_blank');\n                    this.setState({needAuth: true});\n                } else {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        title: 'error',\n                        description: 'gdrive.error.login',\n                        type: 'error'\n                    });\n                    this.closePopup();\n                }\n            }, () => {\n                PubSub.publish(EVENT.SHOW_NOTICE,{\n                    title: 'error',\n                    description: 'gdrive.error.unknown',\n                    type: 'error'\n                });\n                this.closePopup();\n            });\n    }\n\n    logoutFromGdrive() {\n        driveManager\n            .logout()\n            .subscribe((data) => {\n                const {response} = data;\n                const {status} = response;\n\n                if(status === 'success') {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        description: 'gdrive.success.logout',\n                        type: 'success'\n                    });\n                } else {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        title: 'error',\n                        description: 'gdrive.error.logout',\n                        type: 'error'\n                    });\n                }\n                this.closePopup();\n            }, () => {\n                PubSub.publish(EVENT.SHOW_NOTICE,{\n                    title: 'error',\n                    description: 'gdrive.error.unknown',\n                    type: 'error'\n                });\n                this.closePopup();\n            });\n    }\n\n    render() {\n        const {isVisible} = this.props;\n\n        return isVisible ? (\n            <div className=\"fade-curtain\">\n                <div className=\"drive-popup\">\n                    <span\n                        className=\"close\"\n                        onClick={() => this.closePopup()}\n                    >\n                        \n                    </span>\n                    {\n                        this.state.needAuth ? (\n                            <div className=\"drive-popup--auth\">\n                                <h3>{t('gdrive.paste')}</h3>\n                                <form name=\"auth\">\n                                    <textarea\n                                        id=\"code\"\n                                        name=\"code\"\n                                    />\n                                </form>\n                                <div>\n                                    <Button\n                                        id=\"submit-button\"\n                                        type=\"primary\"\n                                        text={t('gdrive.submit')}\n                                        onClick={() => this.sendCode()}\n                                    />\n                                </div>\n                            </div>\n                        ) : (\n                            <div className=\"drive-popup--main\">\n                                <h3>{t('gdrive.title')}</h3>\n                                {driveManager.isLoggedIn ? (\n                                    <div className=\"drive-popup--user\">\n                                        <img\n                                            className=\"drive-popup--user--photo\"\n                                            src={driveManager.user.photo}\n                                            alt=\"\"\n                                        />\n                                        <p className=\"drive-popup--user--name\">{driveManager.user.name}</p>\n                                        <p className=\"drive-popup--user--email\">{driveManager.user.email}</p>\n                                    </div>\n                                ) : null}\n                                <div className=\"drive-popup--main--buttons\">\n                                    <Button\n                                        id=\"authorize-button\"\n                                        text={t('gdrive.login')}\n                                        type=\"primary\"\n                                        disabled={driveManager.isLoggedIn}\n                                        onClick={() => this.authToGdrive()}\n                                    />\n                                    <Button\n                                        id=\"signout-button\"\n                                        disabled={!driveManager.isLoggedIn}\n                                        onClick={() => this.logoutFromGdrive()}\n                                        text={t('gdrive.logout')}\n                                    />\n                                </div>\n                            </div>\n                        )\n                    }\n                </div>\n            </div>\n        ) : null;\n    }\n}\n\nexport default DrivePopup;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar SvgDcbLogo = function SvgDcbLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 42,\n    height: 42,\n    viewBox: \"0 0 11.1125 11.1125\",\n    id: \"svg1376\",\n    ref: svgRef\n  }, props), React.createElement(\"title\", null, title), React.createElement(\"g\", {\n    id: \"layer1\",\n    transform: \"translate(0,-285.8875)\"\n  }, React.createElement(\"g\", {\n    id: \"g1952\"\n  }, React.createElement(\"rect\", {\n    y: 285.88751,\n    x: 0,\n    height: 11.1125,\n    width: 11.1125,\n    id: \"rect1921\",\n    style: {\n      fill: \"#98dc77\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.79107171,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    }\n  }), React.createElement(\"g\", {\n    id: \"g1946\"\n  }, React.createElement(\"rect\", {\n    style: {\n      fill: \"#fffcfb\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.70830655,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    },\n    id: \"rect1925\",\n    width: 7.9375,\n    height: 1.0583333,\n    x: 0,\n    y: 287.21042\n  }), React.createElement(\"circle\", {\n    style: {\n      fill: \"#fffcfb\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.71080917,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    },\n    id: \"path1927\",\n    cx: 8.2912483,\n    cy: 287.73959,\n    r: 1.0583333\n  }))), React.createElement(\"rect\", {\n    style: {\n      fill: \"#fffffc\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.83807957,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    },\n    id: \"rect1925-3\",\n    width: 11.1125,\n    height: 1.0583333,\n    x: 0,\n    y: 294.88333\n  }), React.createElement(\"rect\", {\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.54299682,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    },\n    id: \"rect1925-3-6\",\n    width: 4.761652,\n    height: 1.0368136,\n    x: -295.93829,\n    y: 6.3645663,\n    transform: \"matrix(0.00451945,-0.99998979,0.99999963,8.6460488e-4,0,0)\"\n  }), React.createElement(\"circle\", {\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.62302125,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    },\n    id: \"path1969\",\n    cx: 5.5562501,\n    cy: 295.41251,\n    r: 1.0583333\n  }), React.createElement(\"circle\", {\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.62302125,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    },\n    id: \"path1969-7\",\n    cx: 5.5562501,\n    cy: 290.91458,\n    r: 1.0583333\n  }), React.createElement(\"rect\", {\n    style: {\n      fill: \"#ffffff\",\n      fillOpacity: 1,\n      stroke: \"none\",\n      strokeWidth: 0.54722649,\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"miter\",\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeDashoffset: 0,\n      strokeOpacity: 1,\n      paintOrder: \"fill markers stroke\"\n    },\n    id: \"rect1925-3-6-5\",\n    width: 4.7597623,\n    height: 1.0534469,\n    x: 5.61022,\n    y: 290.38065,\n    transform: \"matrix(0.99999947,0.00102738,0.00260132,0.99999662,0,0)\"\n  })));\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDcbLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dcb-logo.eec317a6.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport Cookies from 'js-cookie';\nimport i18n from '../../services/i18n';\nimport {fromEvent} from \"rxjs\";\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\nimport STATE from \"../board/board-states.consts\";\nimport i18next from 'i18next';\n\nconst t = (str) => i18next.t(str);\n\nclass LanguageSelector extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            visible: false,\n            language: ''\n        };\n        this.clickObserver = fromEvent(document, 'click');\n        this.clickSubscription = null;\n    }\n\n    changeLanguage(language) {\n        i18n.changeLanguage(language);\n        Cookies.set('lang', language, {path: '/', expires: 7});\n        PubSub.publish(EVENT.SET_BOARD_STATE, STATE.EDIT);\n        this.setState({language});\n        if(this.state.visible) {\n            this.toggleSelector();\n        }\n    }\n\n    toggleSelector() {\n        this.setState({\n           visible: !this.state.visible,\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(this.state.visible) {\n            this.clickSubscription = this.clickObserver.subscribe(() => {\n                this.toggleSelector();\n            });\n        } else if(this.clickSubscription) {\n            this.clickSubscription.unsubscribe();\n            this.clickSubscription = null;\n        }\n    }\n\n    componentDidMount() {\n        const language = Cookies.get('lang');\n\n        if(language) {\n            this.changeLanguage(language);\n        } else {\n            this.changeLanguage(i18n.language)\n        }\n    }\n\n    render() {\n        const isVisible = this.state.visible;\n        const language = this.state.language;\n\n        return (\n            <div\n                className=\"language\"\n                title={t('select-language')}\n            >\n                <div\n                    className=\"language--icon\"\n                    onClick={() => this.toggleSelector()}\n                >\n                    <span\n                        className=\"iconify\"\n                        data-icon=\"ic:baseline-language\"\n                    />\n                </div>\n                <li className={`language--list language--list--${isVisible ? 'visible' : 'hidden'}`}>\n                    <ul\n                        className=\"language--list--option\"\n                        onClick={() => this.changeLanguage('en')}\n                    >\n                        <span>English</span>\n                        <span className={`language--check language--check--${language === 'en' ? 'visible' : 'hidden'}`}>\n                            <span\n                                className=\"iconify\"\n                                data-icon=\"ant-design:check-outlined\"\n                            />\n                        </span>\n                    </ul>\n                    <ul\n                        className=\"language--list--option\"\n                        onClick={() => this.changeLanguage('ru')}\n                    >\n                        <span></span>\n                        <span className={`language--check language--check--${language === 'ru' ? 'visible' : 'hidden'}`}>\n                            <span\n                                className=\"iconify\"\n                                data-icon=\"ant-design:check-outlined\"\n                            />\n                        </span>\n                    </ul>\n                </li>\n            </div>\n        );\n    }\n}\n\nexport default LanguageSelector;\n","import React from 'react';\nimport i18next from 'i18next';\nimport { ReactComponent as Logo } from '../../assets/dcb-logo.svg';\nimport LanguageSelector from '../language-selector/language-selector';\n\nconst t = (str) => i18next.t(str);\n\nfunction SubList(props) {\n    const list = props.list.map((entry, idx) => {\n        return (\n            <li className=\"suboptions__option\" onClick={entry.action} key={idx}>\n                <div className='suboptions__name suboptions__entry'>{t(entry.name)}</div>\n                <div className='suboptions__hotkey suboptions__entry'>{entry.hotkey ? entry.hotkey : null}</div>\n            </li>\n        );\n    });\n\n    return (\n        <ul className=\"suboptions\">\n            {list}\n        </ul>\n    );\n}\n\nclass Options extends React.Component {\n    render() {\n        const component = this.props.options.map((option, idx) => {\n            return (\n                <li className=\"main-menu__option-list\" key={idx}>\n                    <div className=\"main-menu__option\">{t(option.name)}</div>\n                    <SubList list={option.suboptions}/>\n                </li>\n            );\n        });\n\n        return <ul className={this.props.className}>{component}</ul>;\n    }\n}\n\nclass mainMenu extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inputVisible: false\n        };\n        this.handleBlur = this.handleBlur.bind(this);\n        this.handleTitleClick = this.handleTitleClick.bind(this);\n    }\n\n    handleTitleClick() {\n        const input = document.getElementsByClassName('scheme-title__input')[0];\n\n        this.setState({\n            inputVisible: true\n        });\n\n        input.style.display = 'inline-block';\n        input.focus();\n    }\n\n    handleBlur(e) {\n        const input = e.target;\n        const name = input.value;\n\n        input.style.display = 'none';\n\n        this.setState({\n            inputVisible: false\n        });\n\n        if(name) {\n            this.props.setSchemeName(name);\n        }\n    }\n\n    render() {\n        const isVisible = this.state.inputVisible;\n\n        return (\n            <div className=\"main-menu__wrapper\">\n                <div className=\"main-menu__section\">\n                    <div className=\"logo-block\">\n                        <Logo className=\"logo\"/>\n                    </div>\n                    <div className=\"menu-block\">\n                        <div className={'scheme-title__wrapper'} key={this.props.schemeName}>\n                            <h3\n                                className={`scheme-title scheme-title--${isVisible ? 'hidden' : 'visible'}`}\n                                onClick={this.handleTitleClick}\n                            >\n                                {this.props.schemeName}\n                            </h3>\n                            <input\n                                className={`scheme-title__input`}\n                                placeholder={'Scheme'}\n                                defaultValue={this.props.schemeName}\n                                onBlur={(e) => this.handleBlur(e)}\n                            />\n                        </div>\n                        <Options className=\"main-menu\" options={this.props.options} />\n                    </div>\n                </div>\n                <div className=\"extras__section\">\n                    <LanguageSelector/>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default mainMenu;\n","import React from 'react';\nimport STATE from '../board/board-states.consts';\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\nimport i18next from \"i18next\";\nimport Button from \"../../elements/Button/Button\";\nimport OutContact from \"../../elements/Out Contact/OutContact\";\n\nconst t = (str) => i18next.t(str);\n\nclass ActionPanel extends React.Component {\n    constructor(props) {\n        super(props);\n        this.actions = [\n            {name: STATE.EDIT, icon: 'vaadin:cursor', title: 'action.edit'},\n            {name: STATE.INTERACT, icon: 'fa:hand-pointer-o', title: 'action.interact'},\n            {name: 'create-button', icon: 'twemoji:black-square-button', title: 'action.create-button'},\n            {name: 'create-outContact', icon: 'fxemoji:radiobutton', title: 'action.create-out-contact'},\n        ];\n    };\n\n    execAction(name) {\n        if(name === 'create-button') {\n            PubSub.publish(EVENT.SET_BOARD_STATE, STATE.CREATE);\n            PubSub.publish(EVENT.SET_CURRENT_ELEMENT, new Button());\n        } else if (name === 'create-outContact') {\n            PubSub.publish(EVENT.SET_BOARD_STATE, STATE.CREATE);\n            PubSub.publish(EVENT.SET_CURRENT_ELEMENT, new OutContact());\n        } else {\n            PubSub.publish(EVENT.SET_BOARD_STATE, name);\n        }\n    }\n\n    render() {\n        const options = this.actions.map((action) => {\n            return <div\n                className={`action-panel__action ${action.name}`}\n                key={action.name}\n                title={t(action.title)}\n                onClick={() => this.execAction(action.name)}\n            >\n                <div\n                    className=\"iconify\"\n                    data-icon={action.icon}\n                />\n            </div>\n        });\n        return (\n            <div className=\"action-panel\">\n                {options}\n            </div>\n        );\n    }\n\n}\n\nexport default ActionPanel;\n","const DETAILS = {\n    fill: {\n        name: 'color',\n        inputType: 'color'\n    },\n    inContacts: {\n        name: 'in',\n        inputType: 'select',\n        valueType: 'range'\n    },\n    outContacts: {\n        name: 'Number of Out contacts',\n        inputType: 'select',\n        valueType: 'range'\n    },\n    initialSignal: {\n        name: 'initial-value',\n        inputType: 'select',\n        valueType: 'signal'\n    },\n    signal: {\n        name: 'current-value',\n        inputType: 'select',\n        valueType: 'signal'\n    },\n    invert: {\n        name: 'invert',\n        inputType: 'select',\n        valueType: 'answer'\n    }\n};\n\nexport default DETAILS;\n","import React from \"react\";\nimport {fromEvent} from \"rxjs\";\nimport DETAILS from './details.consts';\nimport _ from 'lodash';\nimport {UNEDITABLE_PROPS} from \"../../consts/Parse.consts\";\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\nimport i18next from 'i18next';\n\nconst t = (str) => i18next.t(str);\n\nclass ElementDetails extends React.Component{\n    constructor(props) {\n        super(props);\n        this.className = 'element-details';\n        this.currentProp = null;\n        this.handleFocus = this.handleFocus.bind(this);\n        this.resetElementState = this.resetElementState.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.blurSubscription = null;\n    }\n\n    resetElementState() {\n        const curEl = this.props.currentEl;\n        const prop = this.currentProp;\n        const [input] = document.getElementsByName(this.currentProp);\n\n        if((/invert\\d+/).test(prop)) {\n            curEl.setInPinInvertState(Number(prop.match(/\\d+/)[0]) - 1,input.value === 'true')\n        } else {\n            if(input.value === 'true' || input.value === 'false') {\n                curEl.props[prop] = input.value === 'true';\n            } else if(isNaN(input.value)) {\n                curEl.props[prop] = input.value;\n            } else {\n                curEl.props[prop] = Number(input.value);\n            }\n            curEl.setProps(curEl.props);\n        }\n        PubSub.publish(EVENT.SET_CURRENT_ELEMENT, curEl);\n        if(this.blurSubscription) {\n            this.blurSubscription.unsubscribe();\n        }\n    }\n\n    handleFocus(e, prop) {\n        const input = e.target;\n        this.currentProp = prop;\n\n        this.blurSubscription = fromEvent(input, 'blur')\n            .subscribe(this.resetElementState);\n    }\n\n    handleChange(e, prop) {\n        this.currentProp = prop;\n        this.resetElementState();\n    }\n\n    generateOptions(type, prop) {\n        let optionsList;\n        let optionsArray = [];\n        const element = this.props.currentEl;\n        const getOptionArray = (array) => _.map(array, (val) => (<option value={val} key={val}>{val}</option>));\n\n        switch(type) {\n            case 'signal':\n                optionsList = getOptionArray([0, 1]);\n                break;\n            case 'range':\n                if(prop === 'inContacts') {\n                    for(let c = 2; c <= element.maxContacts; c++) {\n                        optionsArray.push(c);\n                    }\n                    optionsList = getOptionArray(optionsArray);\n                }\n                break;\n            case 'answer':\n                optionsList = _.map(\n                    ['no', 'yes'],\n                    (val) => {\n                        const mean = val === 'yes';\n\n                        return (<option value={mean} key={val}>{t(val)}</option>)\n                    }\n                );\n                break;\n            default:\n                optionsList = (<option>Not specified</option>);\n                break;\n        }\n\n        return optionsList;\n    }\n\n    getElementData() {\n        const element = this.props.currentEl;\n        const propsKeys = Object.keys(element.props);\n        const contactsNum = _.get(element, 'props.inContacts', null);\n\n        if(contactsNum) {\n            for(let c = 1; c <= contactsNum; c++) {\n                propsKeys.push(`invert${c}`);\n            }\n        }\n\n        return propsKeys.map((prop) => {\n            const key = `${element.name}_${prop}`;\n            const translation = _.get(DETAILS[prop], 'name', null);\n            let type = _.get(DETAILS[prop], 'inputType', null);\n            let valueType = _.get(DETAILS[prop], 'valueType', null);\n            let name = translation ? t(`props.${translation}`) : null;\n\n            if((/invert\\d+/).test(prop)) {\n                name = t(`props.${DETAILS['invert'].name}`) + ' ' + prop.match(/\\d+/)[0];\n                type = DETAILS['invert'].inputType;\n                valueType = DETAILS['invert'].valueType;\n            }\n\n            return (\n                <tr\n                    key={key}\n                    hidden={_.indexOf(UNEDITABLE_PROPS[prop], element.name) >= 0}\n                >\n                    <td key={prop}>\n                        <span className={'prop-name'}>{name || prop}</span>\n                    </td>\n                    <td\n                        key={key}\n                    >\n                        <span>\n                            {type !== 'select' ? (\n                                <input\n                                    type={type || 'text'}\n                                    defaultValue={element.props[prop]}\n                                    onFocus={type ? null : (e) => this.handleFocus(e, prop)}\n                                    onChange={type ? (e) => this.handleChange(e, prop) : null}\n                                    name={prop}\n                                    className={'prop-input'}\n                                    key={key}\n                                />\n                            ) : (\n                                <select\n                                    defaultValue={element.props[prop]}\n                                    onChange={(e) => this.handleChange(e, prop)}\n                                    name={prop}\n                                    className={'prop-input'}\n                                    key={key}\n                                >\n                                    {this.generateOptions(valueType, prop)}\n                                </select>\n                            ) }\n                        </span>\n                    </td>\n                </tr>\n            );\n        });\n    }\n\n    render() {\n        if (this.props.currentEl && !this.props.currentEl.id) {\n            const elementData = this.getElementData();\n            const currentEl = t(`elements.${this.props.currentEl.name.toLowerCase()}`);\n\n            return (\n                <div className={`${this.className}__wrapper`}>\n                    <table className={this.className}>\n                        <caption className={`${this.className}__title`}>\n                            {i18next.t('properties', {element: currentEl})}\n                        </caption>\n                        <tbody>\n                        <tr>\n                            <th>{t('name')}</th>\n                            <th>{t('value')}</th>\n                        </tr>\n                        {elementData}\n                        </tbody>\n                    </table>\n                </div>\n            );\n        }\n\n        return null;\n    }\n}\n\nexport default ElementDetails;\n","import React from 'react';\nimport ElementDetails from '../element-details/element-details';\nimport i18next from 'i18next';\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\nimport STATE from \"../board/board-states.consts\";\nimport {fromEvent} from \"rxjs\";\nimport Renderer from \"../../utils/render\";\n\nconst t = (str) => i18next.t(str);\n\nclass GroupElements extends React.Component {\n    constructor(props) {\n        super(props);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    handleClick = (el) => {\n        PubSub.publish(EVENT.SET_BOARD_STATE, STATE.CREATE);\n        PubSub.publish(EVENT.SET_CURRENT_ELEMENT, el);\n    };\n\n    render() {\n        const elements = this.props.elements.map((el, idx) => {\n            return (\n                <div\n                    key={idx}\n                    className=\"element\"\n                    title={t(el.name) || el}\n                    onClick={() => this.handleClick(el.create())}\n                >\n                    <img src={el.icon} alt={t(el.name)}/>\n                </div>\n            );\n        });\n\n        return (\n            <div\n                className={this.props.className}\n            >\n                {elements}\n            </div>);\n    }\n}\n\nclass Group extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            opened: false,\n        };\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    handleClick(e) {\n        this.setState({opened: !this.state.opened});\n    }\n\n    render() {\n        const {group, index} = this.props;\n\n        return (\n            <div className={`${this.props.className}-${this.state.opened ? 'opened' : 'closed'} ${this.props.className}`}>\n                <div\n                    className={`details detail--${index}`}\n                    onClick={this.handleClick}\n                >\n                    <span>{t(group.name)}</span>\n                    <div className={'arrow'}/>\n                </div>\n                <GroupElements\n                    elements={group.elements}\n                    className={`elements-list`}\n                    currentEl={this.props.currentEl}\n                />\n            </div>\n        );\n    }\n}\n\nclass GroupDetails extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            opened: false,\n        };\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n\n    handleClick(e) {\n        this.setState({opened: !this.state.opened});\n    }\n\n    render() {\n        const component = this.props.groups.map((group, idx) => {\n            return (\n                <Group\n                    group={group}\n                    className={`${this.props.className}__group`}\n                    index={idx}\n                    key={group.name}\n                    currentEl={this.props.currentEl}\n                />\n            );\n        });\n\n        return (\n            <div\n                className={this.props.className}\n            >\n                {component}\n            </div>\n        );\n    }\n}\n\nclass sideMenu extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.sliderMoveObservable = fromEvent(document, 'mousemove');\n        this.mouseUpSliderObservable = fromEvent(document, 'mouseup');\n        this.sliderMoveSubscription = null;\n        this.mouseUpSliderSubscription = null;\n        this.menuInitialWidth = null;\n\n        this.state = {\n            currentEl: null,\n            originalData: null,\n        };\n\n        this.handleMouseDown = this.handleMouseDown.bind(this);\n        this.mouseUp = this.mouseUp.bind(this);\n    }\n\n    mouseMove(e, slider) {\n        e.preventDefault();\n        const diffX = e.pageX - slider.pageX;\n        const menuWidth = diffX + slider.curColumnWidth;\n\n        if (e.pageX > slider.width && slider.column.getBoundingClientRect().width > slider.width) {\n            slider.column.style.width = `${menuWidth}px`;\n        } else {\n            slider.column.style.width = `${slider.width}px`;\n        }\n\n        if(this.menuInitialWidth > menuWidth) {\n            const {width, height} = document.getElementsByClassName('board__container')[0].getBoundingClientRect();\n            const boardWidth = Renderer.getFieldData().width;\n            const boardHeight = Renderer.getFieldData().height;\n\n            PubSub.publish(EVENT.BOARD_RESIZE, {\n                width: boardWidth > width ? boardWidth : width,\n                height: boardHeight > height ? boardHeight : height\n            });\n            this.menuInitialWidth = menuWidth;\n        }\n    }\n\n    mouseUp(e) {\n        e.preventDefault();\n        this.sliderMoveSubscription.unsubscribe();\n        this.mouseUpSliderSubscription.unsubscribe();\n    }\n\n    handleMouseDown(e) {\n        e.preventDefault();\n\n        const slider = {\n            column: e.target.parentElement,\n            curColumnWidth: e.target.parentElement.offsetWidth,\n            pageX: e.pageX,\n            width: e.target.offsetWidth + 2,\n            height: e.target.offsetHeight\n        };\n\n        this.sliderMoveSubscription = this.sliderMoveObservable\n            .subscribe((e) => this.mouseMove(e, slider));\n        this.mouseUpSliderSubscription = this.mouseUpSliderObservable\n            .subscribe(this.mouseUp);\n    }\n\n    componentDidMount() {\n        const menu = document.getElementsByClassName('side-menu')[0];\n\n        this.menuInitialWidth = menu.getBoundingClientRect().width;\n        fromEvent(window, 'resize')\n            .subscribe((e) => {\n                const windowWidth = e.target.innerWidth;\n                const menuWidth = menu.getBoundingClientRect().width;\n                const menuHeight = menu.getBoundingClientRect().height;\n                const boardWidth = Renderer.getFieldData().width;\n                const boardHeight = Renderer.getFieldData().height;\n\n                PubSub.publish(EVENT.BOARD_RESIZE, {\n                    width: boardWidth + menuWidth > windowWidth ? boardWidth : windowWidth - menuWidth,\n                    height: boardHeight > menuHeight ? boardHeight : menuHeight\n                });\n            });\n    }\n\n    render() {\n        return (\n            <div className=\"side-menu\">\n                <div className=\"side-menu__section__wrapper\">\n                    <div className=\"side-menu__section\">\n                        <GroupDetails\n                            groups={this.props.groups}\n                            className=\"side-menu__section__list\"\n                            currentEl={this.props.currentEl}\n                        />\n                        <ElementDetails\n                            currentEl={this.props.currentEl}\n                        />\n                    </div>\n                </div>\n                <div\n                    className=\"side-menu__split-bar\"\n                    onMouseDown={this.handleMouseDown}\n                />\n            </div>\n        );\n    }\n}\n\nexport default sideMenu;\n","import React from 'react';\nimport _ from 'lodash';\nimport i18next from 'i18next';\n\nconst t = (str) => i18next.t(str);\nconst TYPES = ['success', 'error', 'warning', 'default'];\n\nfunction Notification(props) {\n    const className = `notification--${_.includes(TYPES, props.type) ? props.type : 'default'}`;\n\n    return (\n        <div className={`notification ${className}`} key={props.id}>\n            <div className={`notification--title`}>{t(props.title || 'notice') }</div>\n            <p className={`notification--description`}>{t(props.description)}</p>\n        </div>\n    );\n}\n\nexport default Notification;\n","import elementBuilder from \"../services/elementBuilder\";\n\nfunction ElementBase(name) {\n    this.name = 'elements.' + name.toLowerCase();\n    this.create = elementBuilder.getCreateFuncByName(name);\n    this.icon = elementBuilder.getIconByName(name);\n}\n\nexport const GROUPS = [\n    {\n        name: 'groups.base',\n        elements: [\n            new ElementBase('Or'),\n            new ElementBase('Nor'),\n            new ElementBase('And'),\n            new ElementBase('Nand'),\n            new ElementBase('Xor'),\n            new ElementBase('Nxor')\n        ],\n    },\n    {\n        name: 'groups.gates',\n        elements: [\n            new ElementBase('Invertor'),\n            new ElementBase('Buffer')\n        ],\n    },\n    {\n        name: 'groups.io',\n        elements: [\n            new ElementBase('Constant'),\n            new ElementBase('Button'),\n            new ElementBase('OutContact')\n        ]\n    },\n];\n","import React from 'react';\nimport Renderer from '../../utils/render';\nimport Wire from '../../elements/Wire/Wire';\nimport Junction from '../../elements/Junction/Junction';\nimport STATE from './board-states.consts';\nimport _ from 'lodash';\nimport Element from '../../elements/Element';\nimport {fromEvent} from \"rxjs\";\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\n\nclass Board extends React.Component {\n    constructor(props) {\n        super(props);\n        this.coords = {\n            x: null,\n            y: null,\n            x1: null,\n            y1: null,\n        };\n        this.ghost = null;\n        this.down = false;\n        this.junctionStartingFlag = false;\n        this.junctionEndingFlag = false;\n        this.wiresToBuild = null;\n        this.startingEl = null;\n        this.endingEl = null;\n        this.elements = [];\n        this.wires = [];\n        this.isAnyElementActive = false;\n        this.eventSubscriptions = [];\n\n        window.wires = this.wires;\n        window.elements = this.elements;\n        window.disableWireModels = () => {\n            _.forEach (this.wires, (wire) => {\n                wire.model.stroke = '#00000000';\n            });\n            Renderer.render();\n        };\n\n        window.getAllWireModels = () => {\n            _.forEach (this.wires, (wire) => {\n                console.log(wire.getElement());\n            });\n        };\n\n        this.dragHandler = this.dragHandler.bind(this);\n        this.ghostHelper = this.ghostHelper.bind(this);\n        this.startWire = this.startWire.bind(this);\n        this.endWire = this.endWire.bind(this);\n    }\n\n    getCoords(e) {\n        const target = this.board.getBoundingClientRect();\n\n        const x = e.pageX - target.left;\n        const y = e.pageY - target.top;\n\n        return {x: x, y: y};\n    }\n\n    calcCoords(coords) {\n        coords.x = Math.floor(coords.x/12)*12 + 5;\n        coords.y = Math.floor(coords.y/12)*12 + 5;\n        this.coords.x = coords.x;\n        this.coords.y = coords.y;\n    }\n\n    calcWireCoords(coords, isWireStart = false) {\n        coords.x = Math.floor(coords.x/12)*12 + 5;\n        coords.y = Math.floor(coords.y/12)*12 + 5;\n\n        if(isWireStart) {\n            this.coords.x1 = coords.x;\n            this.coords.y1 = coords.y;\n        } else {\n            this.coords.x = coords.x;\n            this.coords.y = coords.y;\n        }\n    }\n\n    startWire(e) {\n        e.preventDefault();\n        let coords = this.getCoords(e);\n        this.down = true;\n        this.calcWireCoords(coords, true);\n    }\n\n    deleteWire(wire) {\n        const idx = _.findIndex(this.wires, wire);\n\n        wire.destroy();\n        Renderer.removeElementById(wire.id);\n        this.wires.splice(idx,1);\n    }\n\n    tryProlongWire(wire) {\n        const inEl = wire.inConnector;\n        const outEl = wire.outConnector;\n        const coords = this.wiresToBuild.main;\n        let prolonged = false;\n        const optimize = (connector) => {\n            const el = connector.el;\n            const elX1 = _.get(el, 'model.vertices[0].x');\n            const elY1 = _.get(el, 'model.vertices[0].y');\n            const elX2 = _.get(el, 'model.vertices[1].x');\n            const elY2 = _.get(el, 'model.vertices[1].y');\n            if (el.className === 'Wire' && (coords.x2 === elX1 || coords.y2 === elY1)) {\n                if (coords.x2 === elX1) {\n                    const minY = Math.min(coords.y1, coords.y2, elY1, elY2);\n                    const maxY = Math.max(coords.y1, coords.y2, elY1, elY2);\n                    if(elY1 > elY2) {\n                        coords.y2 = minY;\n                        coords.y1 = maxY;\n                    } else {\n                        coords.y1 = minY;\n                        coords.y2 = maxY;\n                    }\n\n                } else {\n                    const minX = Math.min(coords.x1, coords.x2, elX1, elX2);\n                    const maxX = Math.max(coords.x1, coords.x2, elX1, elX2);\n                    if(elX1 < elX2) {\n                        coords.x1 = minX;\n                        coords.x2 = maxX;\n                    } else {\n                        coords.x2 = minX;\n                        coords.x1 = maxX;\n                    }\n                }\n                prolonged = true;\n                if (connector.type === 'in') {\n                    wire.outConnector = el.outConnector;\n                } else {\n                    wire.inConnector = el.inConnector;\n                }\n                this.deleteWire(el);\n            }\n        };\n        if(inEl){\n            optimize(inEl);\n        }\n        if(outEl) {\n            optimize(outEl);\n        }\n\n        return prolonged;\n    }\n\n    revertChain(wire, chainWire, goal) {\n        let wiresToReplace = [chainWire];\n        let el = chainWire;\n        for (el; el.inConnector && _.get(el, 'inConnector.el.name', null) === 'Wire'; el = el.inConnector.el) {\n            wiresToReplace.push(el.inConnector.el);\n        }\n        // wiresToReplace.push(el);\n        if(_.get(goal, 'name', null) === 'Junction') {\n            goal.removeWire(wiresToReplace[wiresToReplace.length - 1]);\n        }\n\n        const replacementWires = _.map(wiresToReplace, () => {\n            const replacement = new Wire();\n            replacement.className = 'Wire';\n\n            return replacement;\n        });\n\n        const len = replacementWires.length;\n\n        for(let c = 0; c < len; c++) {\n            const coords = wiresToReplace[c].getCoords();\n            const replacement = replacementWires[c];\n\n            if(c === 0) {\n                replacement.inConnector = {el: wire, pin: 0, type: 'out'};\n                if(len > 1) {\n                    replacement.outConnector = {\n                        el: replacementWires[c + 1],\n                        pin: 0,\n                        type: 'in'\n                    };\n                } else if (!goal) {\n                    replacement.outConnector = null;\n                } else {\n                    replacement.outConnector = {\n                        el: goal,\n                        pin: 0,\n                        type: 'in'\n                    };\n                }\n            } else if (c === len - 1) {\n                replacement.inConnector = {el: replacementWires[c - 1], pin: 0, type: 'out'};\n                replacement.outConnector = goal ? {el: goal, pin: 0, type: 'in'} : null;\n            } else {\n                replacement.inConnector = {el: replacementWires[c - 1], pin: 0, type: 'out'};\n                replacement.outConnector = {el: replacementWires[c + 1], pin: 0, type: 'in'};\n            }\n            this.deleteWire(wiresToReplace[c]);\n            Renderer.renderWire(replacement, coords.x1, coords.y1, coords.x2, coords.y2);\n            this.wires.push(replacement);\n            this.applyHelpers(replacement);\n        }\n        _.forEach(replacementWires, (wire) => {\n            wire.wire();\n        });\n        wire.outConnector = {el: replacementWires[0], pin: 0, type: 'in'};\n        if(_.get(goal, 'name', null) === 'Junction') {\n            goal.pushWire(replacementWires[len - 1]);\n        }\n    }\n\n    endWire(e) {\n        e.preventDefault();\n        let wire = new Wire();\n        let wireBend = new Wire();\n        const startingEl = this.startingEl;\n        const endingEl = this.endingEl;\n        const startJunction = new Junction();\n        const endJunction = new Junction();\n\n        wire.className = 'Wire';\n        wireBend.className = 'Wire';\n\n        if(this.wiresToBuild) {\n            let main = this.wiresToBuild.main;\n            let bend = this.wiresToBuild.bend;\n            if(main) {\n                if (startingEl || endingEl) {\n                    if (!((startingEl.el.id === endingEl.el.id)\n                        && (startingEl.pin === endingEl.pin)\n                        && (startingEl.type === endingEl.type))\n                    ) {\n                        if (startingEl.type === 'out') {\n                            wire.inConnector = _.clone(startingEl);\n                        } else if (startingEl.type === 'in') {\n                            wire.outConnector = _.clone(startingEl);\n                        }\n                        if (endingEl.type === 'out') {\n                            wire.inConnector = _.clone(endingEl);\n                        } else if (endingEl.type === 'in') {\n                            wire.outConnector = _.clone(endingEl);\n                        }\n                        if(startingEl.el.name === 'Junction') {\n                            startingEl.el.pushWire(wire);\n                        }\n                        if (this.junctionStartingFlag) {\n                            startJunction.setId();\n                            startJunction.pushWire(wire);\n                        }\n                        if(this.junctionEndingFlag && !bend) {\n                            endJunction.setId();\n                            endJunction.pushWire(wire);\n                        }\n                        if(startingEl.type === endingEl.type) {\n                            let goal, chainWire;\n\n                            if(_.get(startingEl, 'el.name', null) === 'Wire') {\n                                chainWire = startingEl.el;\n                                goal = startingEl.el.getCurrentSignalSource();\n                                wire.inConnector = _.clone(endingEl);\n                            } else if(_.get(endingEl, 'el.name', null) === 'Wire') {\n                                chainWire = endingEl.el;\n                                goal = endingEl.el.getCurrentSignalSource();\n                                wire.inConnector = _.clone(startingEl);\n                            }\n                            if(goal && chainWire) {\n                                if(_.get(goal, 'el.name', null) === 'Junction') {\n                                    this.revertChain(wire, chainWire, goal.el);\n                                }\n                            } else {\n                                main = null;\n                                bend = null;\n                            }\n                        }\n                    } else {\n                        if (startingEl.type === 'out') {\n                            wire.inConnector = _.clone(startingEl);\n                        } else if (startingEl.type === 'in') {\n                            wire.outConnector = _.clone(startingEl);\n                        }\n                        if(startingEl.el.name === 'Junction') {\n                            startingEl.el.pushWire(wire);\n                        }\n                        if (this.junctionStartingFlag) {\n                            startJunction.setId();\n                            startJunction.pushWire(wire);\n                        }\n                        if(this.junctionEndingFlag && !bend) {\n                            endJunction.setId();\n                            endJunction.pushWire(wire);\n                        }\n                    }\n                    if(main) {\n                        if ((main.x1 !== main.x2 && (Math.abs(main.y1 - main.y2) !== 2))\n                            || (main.x1 === main.x2 && (main.y1 !== main.y2))) {\n                            this.tryProlongWire(wire);\n                            Renderer.renderWire(wire, main.x1, main.y1, main.x2, main.y2);\n                            this.wires.push(wire);\n                            if(!bend) {\n                                wire.wire();\n                                this.applyHelpers(wire);\n                            }\n                        }\n                    }\n                    if (bend) {\n                        if (wire.outConnector && wire.inConnector) {\n                            if (startingEl.type === 'in') {\n                                wireBend.inConnector = wire.inConnector;\n                                wireBend.outConnector = _.clone({el: wire, pin: 0, type: 'in'});\n                                wire.inConnector = _.clone({el: wireBend, pin: 0, type: 'out'});\n                            } else {\n                                wireBend.outConnector = wire.outConnector;\n                                wireBend.inConnector = _.clone({el: wire, pin: 0, type: 'out'});\n                                wire.outConnector = _.clone({el: wireBend, pin: 0, type: 'in'});\n                            }\n                        } else if (wire.outConnector && !wire.inConnector) {\n                            wire.inConnector = _.clone({el: wireBend, pin: 0, type: 'out'});\n                            wireBend.outConnector = _.clone({el: wire, pin: 0, type: 'in'});\n                        } else {\n                            wireBend.inConnector = _.clone({el: wire, pin: 0, type: 'out'});\n                            wire.outConnector = _.clone({el: wireBend, pin: 0, type: 'in'});\n                        }\n                        if(this.junctionEndingFlag) {\n                            endJunction.setId();\n                            endJunction.pushWire(wireBend);\n                        }\n                        this.wires.push(wireBend);\n                        Renderer.renderWire(wireBend, bend.x1, bend.y1, bend.x2, bend.y2);\n                        wireBend.wire();\n                        wire.wire();\n                        this.applyHelpers(wire);\n                        this.applyHelpers(wireBend);\n                    }\n                    if (this.junctionStartingFlag) {\n                        const coords = this.startingEl.el.getCoords();\n\n                        Renderer.renderJunction(\n                            startJunction,\n                            coords.orientation === 'horizontal' ? main.x1 : coords.x1,\n                            coords.orientation === 'horizontal' ? coords.y1 : main.y1,\n                        );\n                        this.elements.push(startJunction);\n                        this.sliceWire(this.startingEl.el, startJunction);\n                        startJunction.enableOutPinHelper(0);\n                        Renderer.render();\n                        this.applyHelpers(startJunction);\n                    }\n                    if(this.junctionEndingFlag) {\n                        const coords = this.endingEl.el.getCoords();\n                        const wireCoords = bend ? wireBend.getCoords() : wire.getCoords();\n\n                        Renderer.renderJunction(\n                            endJunction,\n                            coords.orientation === 'horizontal' ? wireCoords.x1 : coords.x1,\n                            coords.orientation === 'horizontal' ? coords.y1 : wireCoords.y2,\n                        );\n                        this.elements.push(endJunction);\n                        this.sliceWire(this.endingEl.el, endJunction);\n                        endJunction.enableOutPinHelper(0);\n                        Renderer.render();\n                        this.applyHelpers(endJunction);\n                    }\n                    Renderer.removeElement({className: 'main'});\n                    Renderer.removeElement({className: 'bend'});\n                }\n            }\n            this.updateGlobalData();\n        }\n        this.down = false;\n        // this.board.removeEventListener('mousemove', this.ghostHelper);\n        this.startingEl = null;\n        this.endingEl = null;\n        this.junctionStartingFlag = false;\n        this.junctionEndingFlag = false;\n\n        if(this.props.state === STATE.WIRE) {\n            PubSub.publish(EVENT.SET_BOARD_STATE, STATE.EDIT);\n        }\n    }\n\n    updateGlobalData() {\n        PubSub.publish(EVENT.UPDATE_DATA, {\n            schemeName: this.props.data.schemeName,\n            elements: this.elements,\n            wires: this.wires\n        });\n    }\n\n    sliceWire(wire, junction) {\n        const inConnector = _.get(wire.inConnector, 'el', null);\n        const outConnector = _.get(wire.outConnector, 'el', null);\n        const coords = wire.getCoords();\n        const jcoords = junction.getCoords();\n        const firstWire = new Wire();\n        const secondWire = new Wire();\n        const idx = _.findIndex(this.wires, wire);\n        const applySlice = (inConnectorCoords, outConnectorCoords) => {\n            let start = {};\n            let end = {};\n            const inConnectorName = _.get(inConnector, 'name', null);\n            // const outConnectorName = _.get(outConnector, 'name', null);\n\n            if(coords.orientation === 'horizontal') {\n                if(inConnectorCoords.x1 > outConnectorCoords.x1) {\n                    start = {\n                        x1: Math.max(coords.x1, coords.x2),\n                        y1: coords.y1,\n                        x2: jcoords.x1 - 1,\n                        y2: jcoords.y1\n                    };\n                    end = {\n                        x1: jcoords.x1 + 1,\n                        y1: jcoords.y1,\n                        x2: Math.min(coords.x1, coords.x2),\n                        y2: coords.y1,\n                    };\n                } else {\n                    start = {\n                        x1: Math.min(coords.x1, coords.x2),\n                        y1: coords.y1,\n                        x2: jcoords.x1 + 1,\n                        y2: jcoords.y1\n                    };\n                    end = {\n                        x1: jcoords.x1 - 1,\n                        y1: jcoords.y1,\n                        x2: Math.max(coords.x1, coords.x2),\n                        y2: coords.y1,\n                    };\n                }\n            } else {\n                if(inConnectorCoords.y1 < outConnectorCoords.y1) {\n                    start = {\n                        x1: coords.x1,\n                        y1: Math.min(coords.y1, coords.y2),\n                        x2: jcoords.x1,\n                        y2: jcoords.y1 + 2,\n                    };\n                    end = {\n                        x1: jcoords.x1,\n                        y1: jcoords.y1 - 1,\n                        x2: coords.x1,\n                        y2: Math.max(coords.y1, coords.y2),\n                    };\n                } else {\n                    start = {\n                        x1: coords.x1,\n                        y1: Math.max(coords.y1, coords.y2),\n                        x2: jcoords.x1,\n                        y2: jcoords.y1 - 2\n                    };\n                    end = {\n                        x1: jcoords.x1,\n                        y1: jcoords.y1 + 1,\n                        x2: coords.x1,\n                        y2: Math.min(coords.y1, coords.y2),\n                    };\n                }\n            }\n            const slength = Math.max(Math.abs(start.x1 - start.x2), Math.abs(start.y1 - start.y2));\n            const elength = Math.max(Math.abs(end.x1 - end.x2), Math.abs(end.y1 - end.y2));\n\n            if((slength > 5 && elength > 5) || (inConnectorName !== 'Wire')) {\n                this.deleteWire(wire);\n\n                firstWire.inConnector = wire.inConnector;\n                firstWire.outConnector = wire.inConnector ? {el: junction, pin: 0, type: 'in'} : null;\n                if(!wire.getCurrentSignalSource() && wire.inConnector) {\n                    this.revertChain(firstWire, wire.inConnector.el, null);\n                }\n                secondWire.inConnector = {el: junction, pin: 0, type: 'out'};\n                secondWire.outConnector = wire.outConnector;\n\n                Renderer.renderWire(firstWire, start.x1, start.y1, start.x2, start.y2);\n                Renderer.renderWire(secondWire, end.x1, end.y1, end.x2, end.y2);\n                this.applyHelpers(firstWire);\n                this.applyHelpers(secondWire);\n                this.wires.splice(idx, 0, firstWire);\n                this.wires.splice(idx, 0, secondWire);\n                junction.pushWire(firstWire);\n                junction.pushWire(secondWire);\n                firstWire.wire();\n                secondWire.wire();\n                // if((inConnectorName !== 'Wire')) {\n                //\n                //     console.log(firstWire.junctionHelpers, secondWire.junctionHelpers);\n                //     firstWire.junctionHelpers.pop();\n                // }\n                if(_.get(outConnector, 'name', null) === 'Junction') {\n                    outConnector.removeWire(wire);\n                    outConnector.pushWire(secondWire);\n                }\n                junction.updateState();\n                return true;\n            }\n            return false;\n        };\n\n        // let isSliced;\n\n        firstWire.className = 'Wire';\n        secondWire.className = 'Wire';\n\n        if(inConnector && outConnector) {\n            const inConnectorCoords = inConnector.getCoords();\n            const outConnectorCoords = outConnector.getCoords();\n\n            applySlice(inConnectorCoords, outConnectorCoords);\n            // isSliced =\n            // if(!isSliced) {\n            //     wire.unsub();\n            //     inConnector.unsub();\n            //     junction.pushWire(wire);\n            //     junction.pushWire(inConnector);\n            //     wire.wire();\n            //     inConnector.wire();\n            //     junction.updateState();\n            // }\n        } else if(inConnector) {\n            const inConnectorCoords = inConnector.getCoords();\n            const distanceX1 = Math.abs(inConnectorCoords.x1 - coords.x1);\n            const distanceX2 = Math.abs(inConnectorCoords.x1 - coords.x2);\n            const distanceY1 = Math.abs(inConnectorCoords.y1 - coords.y1);\n            const distanceY2 = Math.abs(inConnectorCoords.y1 - coords.y2);\n            const outCoords = {\n                x1: Math.max(distanceX1, distanceX2) === distanceX1 ? coords.x1 : coords.x2,\n                y1: Math.max(distanceY1, distanceY2) === distanceX1 ? coords.x1 : coords.x2,\n            };\n\n            applySlice(inConnectorCoords, outCoords);\n            // isSliced =\n            // if(!isSliced) {\n            //     wire.junctionHelpers.pop();\n            //     Renderer.removeElementById(wire.id + 'bend-helper');\n            //     wire.unsub();\n            //     inConnector.unsub();\n            //     junction.pushWire(wire);\n            //     junction.pushWire(inConnector);\n            //     wire.wire();\n            //     inConnector.wire();\n            //     junction.updateState();\n            // }\n        } else if (outConnector) {\n            const outConnectorCoords = outConnector.getCoords();\n            const distanceX1 = Math.abs(outConnectorCoords.x1 - coords.x1);\n            const distanceX2 = Math.abs(outConnectorCoords.x1 - coords.x2);\n            const distanceY1 = Math.abs(outConnectorCoords.y1 - coords.y1);\n            const distanceY2 = Math.abs(outConnectorCoords.y1 - coords.y2);\n            const inCoords = {\n                x1: Math.max(distanceX1, distanceX2) === distanceX1 ? coords.x1 : coords.x2,\n                y1: Math.max(distanceY1, distanceY2) === distanceX1 ? coords.x1 : coords.x2,\n            };\n\n            applySlice(inCoords, outConnectorCoords);\n        }\n\n    }\n\n    dragHandler(e) {\n        e.preventDefault();\n        const el = _.cloneDeep(this.props.currentEl);\n        const boardWidth = Renderer.getFieldData().width;\n        const boardHeight = Renderer.getFieldData().height;\n\n        Renderer.renderElement(el, this.coords.x, this.coords.y);\n        this.elements.push(el);\n        el.setId();\n        el.updateState();\n        this.applyHelpers(el);\n        this.updateGlobalData();\n\n        PubSub.publish(EVENT.BOARD_RESIZE, {\n            width: el.x + el.width > boardWidth ? boardWidth + el.width * 2 : boardWidth,\n            height: el.y + el.height > boardHeight ? boardHeight + el.height * 2 : boardHeight\n        });\n\n        el.model._renderer.elem.scrollIntoView();\n    }\n\n    applyHelpers(el) {\n        const iterFunc = (startFunction, endFunction) => {\n            return (pin, idx) => {\n                const domEl = _.get(pin, 'helper._renderer.elem', null);\n\n                if (domEl) {\n                    const pinMousemove = fromEvent(domEl, 'mousemove')\n                        .subscribe(() => {\n                            if((this.props.state === STATE.EDIT || this.props.state === STATE.WIRE) && pin.helperEnabled) {\n                                pin.helper.opacity = 1;\n                                Renderer.render();\n                                endFunction(el, idx);\n                            }\n                        });\n                    const pinMousedown = fromEvent(domEl, 'mousedown')\n                        .subscribe(() => {\n                            if(this.props.state === STATE.EDIT && pin.helperEnabled) {\n                                PubSub.publish(EVENT.SET_BOARD_STATE, STATE.WIRE);\n                                startFunction(el, idx);\n                            }\n                        });\n                    const pinMouseout = fromEvent(domEl, 'mouseout')\n                        .subscribe(() => {\n                            if((this.props.state === STATE.EDIT || this.props.state === STATE.WIRE) && pin.helperEnabled) {\n                                pin.helper.opacity = 0;\n                                Renderer.render();\n                                this.endingEl = this.startingEl;\n                            }\n                        });\n\n                    el.addSubscription(pinMousemove, pinMousedown, pinMouseout);\n                }\n            };\n        };\n        const vm = this;\n\n        if(el.outPins) {\n            _.forEach(\n                el.outPins.pins,\n                iterFunc(\n                    (el, idx) => {\n                        vm.startingEl = {el: el, pin: idx, type: 'out'}\n                    },\n                    (el, idx) => {\n                        vm.endingEl = {el: el, pin: idx, type: 'out'}\n                    }\n                )\n            );\n        }\n        if(el.inPins) {\n            _.forEach(\n                el.inPins.pins,\n                iterFunc(\n                    (el, idx) => {vm.startingEl = {el: el, pin: idx, type: 'in'}},\n                    (el, idx) => {vm.endingEl = {el: el, pin: idx, type: 'in'}}\n                )\n            );\n        }\n        _.forEach(el.junctionHelpers, (model) => {\n            const domModel = model._renderer.elem;\n\n            const junctionMousemove = fromEvent(domModel, 'mousemove').subscribe(() => {\n                if(this.props.state === STATE.EDIT || this.props.state === STATE.WIRE) {\n                    const stId = _.get(this.startingEl, 'el.id', null);\n                    const endId = _.get(this.endingEl, 'el.id', null);\n\n                    model.opacity = 1;\n                    Renderer.render();\n                    this.endingEl = {el: el, pin: 0, type: null};\n                    this.junctionEndingFlag = stId && endId && (stId !== endId);\n                }\n            });\n            const junctionMouseout = fromEvent(domModel, 'mouseout').subscribe(() => {\n                if(this.props.state === STATE.EDIT || this.props.state === STATE.WIRE) {\n                    model.opacity = 0;\n                    Renderer.render();\n                    this.junctionEndingFlag = false;\n                    this.endingEl = this.startingEl;\n                }\n            });\n            const junctionMousedown = fromEvent(domModel, 'mousedown').subscribe(() => {\n                    if(this.props.state === STATE.EDIT) {\n                        PubSub.publish(EVENT.SET_BOARD_STATE, STATE.WIRE);\n                        this.startingEl = {el: el, pin: 0, type: null};\n                        this.junctionStartingFlag = true;\n\n                        const junctionMouseup = fromEvent(domModel, 'mouseup')\n                            .subscribe(() => {\n                                this.junctionStartingFlag = false;\n                                this.startingEl = null;\n                                this.endingEl = null;\n                                junctionMouseup.unsubscribe();\n                            });\n                    }\n                });\n\n            el.addSubscription(junctionMousedown, junctionMousemove, junctionMouseout);\n        });\n\n        if(el.name === 'Wire') {\n            const wireBounds = el.modelGroup._renderer.elem;\n\n            const wireClick = fromEvent(wireBounds, 'click')\n                .subscribe((e) => {\n                    e.preventDefault();\n                    if(this.props.state === STATE.EDIT) {\n                        el.model.className += ' element-active';\n\n                        const handleDelete = fromEvent(document, 'keydown')\n                            .subscribe((e) => {\n                                if(e.keyCode === 46) {\n                                    this.deleteWire(el);\n                                    Renderer.eraseActiveZone();\n                                    handleDelete.unsubscribe();\n                                }\n                            });\n\n                        const clickElsewhere = fromEvent(document, 'mousedown')\n                            .subscribe((e) => {\n                                const parts = '.element-active, .element-active *';\n\n                                if(!e.target.matches(parts)) {\n                                    el.model.className = el.model.className.replace(' element-active', '');\n                                    el.active = false;\n                                    this.isAnyElementActive = false;\n                                    Renderer.eraseActiveZone();\n                                    clickElsewhere.unsubscribe();\n                                    handleDelete.unsubscribe();\n                                }\n                            });\n                        Renderer.renderActiveWireZone(el);\n                    }\n                });\n\n            el.addSubscription(wireClick);\n        }\n\n        if(el.name !== 'Junction' && el.name !== 'Wire') {\n            const elementBounds = el.model._renderer.elem;\n\n            const elementClick = fromEvent(elementBounds, 'click')\n                .subscribe((e) => {\n                    e.preventDefault();\n                    if(this.props.state === STATE.EDIT) {\n                        el.model.className += ' element-active';\n                        el.active = true;\n                        this.isAnyElementActive = true;\n                        PubSub.publish(EVENT.SET_CURRENT_ELEMENT, el);\n\n                        const handleDelete = fromEvent(document, 'keydown')\n                            .subscribe((e) => {\n                                if(e.keyCode === 46) {\n                                    this.deleteElement(el);\n                                    Renderer.eraseActiveZone();\n                                    handleDelete.unsubscribe();\n                                }\n                            });\n\n                        const clickElsewhere = fromEvent(document, 'mousedown')\n                            .subscribe((e) => {\n                                const parts = '.element-active, .element-active *';\n\n                                if(!e.target.matches(parts)) {\n                                    el.model.className = el.model.className.replace(' element-active', '');\n                                    elementBounds.style.cursor = 'default';\n                                    el.active = false;\n                                    this.isAnyElementActive = false;\n                                    Renderer.eraseActiveZone();\n                                    clickElsewhere.unsubscribe();\n                                    handleDelete.unsubscribe();\n                                }\n                            });\n                        Renderer.renderActiveZone(el);\n                    }\n                });\n\n            const elementMousedown = fromEvent(elementBounds, 'mousedown')\n                .subscribe(() => {\n                    if(el.active && this.props.state === STATE.EDIT) {\n                        const ghost = _.cloneDeep(this.props.currentEl);\n                        let move = false;\n\n                        ghost.className = 'ghost';\n                        ghost.props.opacity = 0.5;\n                        this.ghost = ghost;\n                        elementBounds.style.cursor = 'grabbing';\n\n                        const mouseMove = fromEvent(document, 'mousemove')\n                            .subscribe((e) => {\n                                move = true;\n                                this.ghostHelper(e);\n                                this.deleteElement(el);\n                                Renderer.eraseActiveZone();\n                            });\n\n                        const mouseUp = fromEvent(document, 'mouseup')\n                            .subscribe((e) => {\n                                if(move) {\n                                    this.dragHandler(e);\n                                } else {\n                                    elementBounds.style.cursor = 'grab';\n                                }\n                                mouseUp.unsubscribe();\n                                mouseMove.unsubscribe();\n                            });\n                    }\n                });\n\n            el.addSubscription(elementClick, elementMousedown);\n        }\n    }\n\n    deleteElement(element) {\n        const idx = _.findIndex(this.elements, element);\n\n        element.destroy();\n        Renderer.removeElementById(element.id);\n        this.elements.splice(idx, 1);\n    }\n\n    orientationCorrection(x1, y1, x2, y2) {\n        if(x1 === x2) {\n            x1++;\n            x2++;\n            if(y1 < y2) {\n                y2 += 2;\n            } else {\n                y1 += 2;\n            }\n        } else if(y1 === y2) {\n            y1++;\n            y2++;\n            if(x1 < x2) {\n                x2 += 2;\n            } else {\n                x1 += 2;\n            }\n        }\n\n        return [x1, y1, x2, y2];\n    }\n\n    ghostHelper(e) {\n        e.preventDefault();\n        const ghost = this.ghost;\n        let coords = this.getCoords(e);\n\n        if(ghost && (this.props.state === STATE.CREATE || this.isAnyElementActive)) {\n            this.calcCoords(coords);\n            Renderer.removeElement(ghost);\n            Renderer.renderGhost(ghost, coords.x, coords.y);\n        }\n\n        if(this.props.state === STATE.WIRE && this.down) {\n            const wire = new Wire();\n            const bend = new Wire();\n            wire.className = 'main';\n            bend.className = 'bend';\n            const prev = Renderer.getElement(wire);\n            this.calcWireCoords(coords);\n            Renderer.removeElement(wire);\n            Renderer.removeElement(bend);\n\n            let x1 = this.coords.x1;\n            let y1 = this.coords.y1;\n            let x2 = this.coords.x;\n            let y2 = this.coords.y;\n\n            if(y1 !== y2 && x1 !== x2) {\n                let x1m, y1m, x2m, y2m;\n                let x1b, y1b, x2b, y2b;\n                if(prev.length > 0 && (prev[0].vertices[0].x === prev[0].vertices[1].x)){\n                    [x1m, y1m, x2m, y2m] = [x1, y1, x1, y2];\n                    [x1b, y1b, x2b, y2b] = [x1, y2, x2, y2];\n                } else {\n                    [x1m, y1m, x2m, y2m] = [x1, y1, x2, y1];\n                    [x1b, y1b, x2b, y2b] = [x2, y1, x2, y2];\n                }\n                [x1m, y1m, x2m, y2m] = this.orientationCorrection(x1m, y1m, x2m, y2m);\n                [x1b, y1b, x2b, y2b] = this.orientationCorrection(x1b, y1b, x2b, y2b);\n                Renderer.renderWire(wire, x1m, y1m, x2m, y2m, false);\n                Renderer.renderWire(bend, x1b, y1b, x2b, y2b);\n                this.wiresToBuild = {\n                    main: {\n                        x1: x1m,\n                        y1: y1m,\n                        x2: x2m,\n                        y2: y2m\n                    },\n                    bend: {\n                        x1: x1b,\n                        y1: y1b,\n                        x2: x2b,\n                        y2: y2b\n                    }\n                };\n            } else {\n                [x1, y1, x2, y2] = this.orientationCorrection(x1,y1,x2,y2);\n\n                Renderer.renderWire(wire, x1, y1, x2, y2);\n                this.wiresToBuild = {\n                    main: {\n                        x1: x1,\n                        y1: y1,\n                        x2: x2,\n                        y2: y2\n                    }\n                };\n            }\n        }\n    }\n\n    resetComponent() {\n        if(this.board){\n            if(this.ghost) {\n                Renderer.removeElement(this.ghost);\n                Renderer.render();\n            }\n            this.ghost = null;\n            _.forEach(this.eventSubscriptions, (subscription) => {\n                subscription.unsubscribe();\n            });\n            this.eventSubscriptions = [];\n        }\n    }\n\n    async loadData(data) {\n        const elements = data.elements;\n        const wires = data.wires;\n\n        _.forEach(elements, (element) => {\n            this.applyHelpers(element);\n            this.elements.push(element);\n        });\n\n        _.forEach(wires, (wire) => {\n            this.applyHelpers(wire);\n            this.wires.push(wire);\n        });\n\n        window.wires = this.wires;\n        window.elements = this.elements;\n    }\n\n    resetData() {\n        this.wires = [];\n        this.elements = [];\n    }\n\n    setBoardState() {\n        this.resetComponent();\n        Element.boardState = this.props.state;\n        switch(this.props.state) {\n            case STATE.WIRE:\n                this.eventSubscriptions.push(\n                    fromEvent(this.board, 'mousemove')\n                        .subscribe(this.ghostHelper),\n                    fromEvent(this.board, 'mousedown')\n                        .subscribe(this.startWire),\n                    fromEvent(this.board, 'mouseup')\n                        .subscribe(this.endWire),\n                );\n                break;\n            case STATE.EDIT:\n                break;\n            case STATE.CREATE:\n                this.eventSubscriptions.push(\n                    fromEvent(this.board, 'mousemove')\n                        .subscribe(this.ghostHelper),\n                    fromEvent(this.board, 'click')\n                        .subscribe(this.dragHandler)\n                );\n                const ghost = _.cloneDeep(this.props.currentEl);\n\n                ghost.className = 'ghost';\n                ghost.props.opacity = 0.5;\n                this.ghost = ghost;\n                break;\n            case STATE.DISABLE_MODELING:\n                const text = document.getElementsByTagName('text');\n                const junctions = document.getElementsByClassName('junction-circle');\n                const shapes = document.querySelectorAll('#board svg *');\n                const shapesColors = [];\n                const textColors = [];\n                const junctionsColors = [];\n                const BLACK_COLOR = '#000';\n\n                _.forEach(text, (shape) => {\n                    const fill = window\n                        .getComputedStyle(shape)\n                        .getPropertyValue('fill');\n\n                    textColors.push(fill);\n                    shape.setAttribute('fill', BLACK_COLOR);\n                });\n\n                _.forEach(junctions, (junction) => {\n                    const fill = window\n                        .getComputedStyle(junction)\n                        .getPropertyValue('fill');\n\n                    junctionsColors.push(fill);\n                    junction.setAttribute('fill', BLACK_COLOR);\n                });\n\n                _.forEach(shapes, (shape) => {\n                    const stroke = window\n                        .getComputedStyle(shape)\n                        .getPropertyValue('stroke');\n\n                    shapesColors.push(stroke);\n\n                    if(stroke !== 'none') {\n                        shape.setAttribute('stroke', BLACK_COLOR);\n                    }\n                });\n                PubSub.publish(EVENT.MODELING_OFF, true);\n                _.forEach(text, (shape, idx) => {\n                    shape.setAttribute('fill', textColors[idx]);\n                });\n\n                _.forEach(junctions, (junction, idx) => {\n                    junction.setAttribute('fill', junctionsColors[idx]);\n                });\n\n                _.forEach(shapes, (shape, idx) => {\n                    const stroke = window\n                        .getComputedStyle(shape)\n                        .getPropertyValue('stroke');\n\n                    if(stroke !== 'none') {\n                        shape.setAttribute('stroke', shapesColors[idx]);\n                    }\n                });\n                break;\n            case STATE.LOAD_DATA:\n                this.resetData();\n                this.loadData(this.props.data)\n                    .then(() => {\n                        PubSub.publish(EVENT.SET_BOARD_STATE, STATE.EDIT);\n                        PubSub.publish(EVENT.TOGGLE_LOADING, {toggle: false});\n                    });\n                break;\n            default:\n                break;\n        }\n    }\n\n    componentDidMount() {\n        this.board = document.getElementById('board');\n        Renderer.init(this.board);\n        window.renderer = Renderer;\n        fromEvent(this.board, 'mousedown')\n            .subscribe((e) => {\n                e.preventDefault();\n            });\n    }\n\n    render() {\n        this.setBoardState();\n        return (\n            <div className=\"board__container\">\n                <div className={`board board--${this.props.state}`} id=\"board\" />\n            </div>\n        );\n    }\n}\n\nexport default Board;\n","import * as React from 'react';\nimport fileManager from \"../../services/fileManager\";\nimport STATE from \"../board/board-states.consts\";\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\n\nclass FileInput extends React.Component {\n\n    handleChange(e) {\n        const files = e.target.files;\n        const file = files[0];\n\n        if(file) {\n            PubSub.publish(EVENT.TOGGLE_LOADING, {\n               toggle: true,\n               status: 'Loading scheme'\n            });\n            fileManager.loadFile(file)\n                .subscribe((data) => {\n                    PubSub.publish(EVENT.UPDATE_DATA, data);\n                    setTimeout(() => {\n                        PubSub.publish(EVENT.SET_BOARD_STATE, STATE.LOAD_DATA);\n                    }, 100);\n                });\n        }\n    }\n\n    render() {\n        return (\n            <input\n                className=\"file-input\"\n                id=\"file-input\"\n                type=\"file\"\n                accept=\".dcb\"\n                onChange={(e) => this.handleChange(e)}\n            />);\n    }\n}\n\nexport default FileInput;\n","import React from 'react';\nimport _ from 'lodash';\nimport driveManager from \"../../services/driveManager\";\nimport Spinner from '../spinner/spinner';\nimport Button from '../button/button';\nimport STATE from \"../board/board-states.consts\";\nimport fileManager from \"../../services/fileManager\";\nimport PubSub from \"../../services/pubSub\";\nimport {EVENT} from \"../../consts/events.consts\";\nimport i18next from 'i18next';\n\nconst t = (str) => i18next.t(str);\nconst rootPath = 'drive://';\n\nclass FileTree extends React.Component {\n    render() {\n        const currentEntry = this.props.currentEntry;\n        const warning = this.props.warning;\n        const files = _.map(this.props.files, (file) => {\n            return (\n                <tr\n                    className={`fs--table--row ${file.id === currentEntry.id ? `fs--table--row--selected` : ''}`}\n                    key={file.id}\n                    onClick={() => this.props.setCurrentEntry(file)}\n                    onDoubleClick={() => this.props.goDeep(file)}\n                >\n                    <td className=\"fs--table--icon\">\n                        <span\n                            className=\"iconify\"\n                            data-icon={`ant-design:${file.type}-outlined`}\n                        />\n                    </td>\n                    <td className=\"fs--table--entry\">{file.name}</td>\n                </tr>\n            );\n        });\n\n        if(this.props.files.length === 0) {\n            if(warning){\n                return (<p>{warning}</p>);\n            }\n\n            return (\n                <p>{t('gdrive.fs.empty')}</p>\n            );\n        }\n\n        return (\n            <table className=\"fs--table\">\n                <tbody>{files}</tbody>\n            </table>\n        );\n    }\n}\n\nclass FileBrowser extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: false,\n            path: [\n                {\n                    name: 'drive:/',\n                    type: 'folder',\n                    id: 'root'\n                }\n            ],\n            currentEntry: {\n                name: 'drive:/',\n                type: 'folder',\n                id: 'root'\n            },\n            files: [],\n            warningMsg: null\n        };\n\n        this.navigateToLoginPopup = this.navigateToLoginPopup.bind(this);\n    }\n\n    navigateToLoginPopup() {\n        this.close();\n        PubSub.publish(EVENT.TOGGLE_GDRIVE_POPUP, true);\n    }\n\n    close() {\n        PubSub.publish(EVENT.TOGGLE_FILE_BROWSER, {\n            state: false,\n            mode: ''\n        });\n    }\n\n    openFile() {\n        const file = this.state.currentEntry;\n\n        this.close();\n        PubSub.publish(EVENT.TOGGLE_LOADING, {\n            toggle: true,\n            status: i18next.t('loading-file', {file: file.name})\n        });\n        driveManager.getFile(file.id).subscribe((data) => {\n            const {status, fileData} = data.response;\n\n            if(status === 'success') {\n                const scheme = JSON.parse(fileData);\n\n                fileManager.loadData(scheme, file.name).then((data) => {\n                    PubSub.publish(EVENT.UPDATE_DATA, data);\n                    setTimeout(() => {\n                        PubSub.publish(EVENT.SET_BOARD_STATE, STATE.LOAD_DATA);\n                    }, 100);\n                });\n            } else if (status === 'auth') {\n                PubSub.publish(EVENT.TOGGLE_LOADING, {toggle: false});\n                PubSub.publish(EVENT.SHOW_NOTICE,{\n                    description: 'Please sign in to Google Drive',\n                    type: 'warning'\n                });\n            } else {\n                PubSub.publish(EVENT.TOGGLE_LOADING, {toggle: false});\n                PubSub.publish(EVENT.SHOW_NOTICE,{\n                    description: 'Error loading file',\n                    type: 'error'\n                });\n            }\n        }, () => {\n            PubSub.publish(EVENT.TOGGLE_LOADING, {toggle: false});\n            PubSub.publish(EVENT.SHOW_NOTICE,{\n                description: 'Error loading file',\n                type: 'error'\n            });\n        });\n    }\n\n    saveFile() {\n        const data = this.props.schemeData;\n        const folder = this.state.currentEntry;\n\n        this.close();\n        driveManager.saveFile(data, folder.id)\n            .subscribe((data) => {\n                const {status} = data.response;\n\n                if(status === 'success') {\n                    PubSub.publish(EVENT.SHOW_NOTICE, {\n                        description: 'File saved to Google Drive',\n                        type: 'success'\n                    });\n                } else if (status === 'auth') {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        description: 'Please sign in to Google Drive',\n                        type: 'warning'\n                    });\n                } else {\n                    PubSub.publish(EVENT.SHOW_NOTICE,{\n                        description: 'Error saving file to Google Drive',\n                        type: 'error'\n                    });\n                }\n            }, () => {\n                PubSub.publish(EVENT.SHOW_NOTICE,{\n                    description: 'Error saving file to Google Drive',\n                    type: 'error'\n                });\n            });\n    }\n\n    goUp() {\n        const path = this.state.path;\n\n        path.pop();\n        this.setState({\n            path\n        });\n        this.setFolder(_.last(path).id);\n        this.setCurrentEntry(_.last(path));\n    }\n\n    goDeep(entry) {\n        const path = this.state.path;\n\n        if(entry.type === 'file') {\n            this.openFile();\n\n            return;\n        }\n\n        path.push(entry);\n        this.setState({\n            path\n        });\n        this.setFolder(entry.id);\n    }\n\n    setCurrentEntry(entry) {\n        this.setState({\n            currentEntry: entry\n        });\n    }\n\n    setFolder(folderId) {\n        const mode = this.props.mode || 'open';\n\n        this.setState({\n            loading: true\n        });\n        driveManager.listFiles(folderId)\n            .subscribe((data) => {\n                if(data.response.status === 'success') {\n                    let files = _.map(data.response.files, (file) => {\n                        const {name, id} = file;\n                        const fileRegx = /.+\\.dcb/;\n                        const type = fileRegx.test(name) ? 'file' : 'folder';\n\n                        return {\n                            id,\n                            name,\n                            type\n                        }\n                    });\n\n                    if(mode === 'save') {\n                        files = _.filter(files, ['type', 'folder'])\n                    }\n\n                    this.setState({\n                        loading: false,\n                        files\n                    });\n                }\n            });\n    }\n\n    componentDidMount() {\n        if(driveManager.isLoggedIn) {\n            this.setFolder(_.last(this.state.path).id);\n        } else {\n            this.setState({\n                warningMsg: (<span className=\"false-link\" onClick={this.navigateToLoginPopup}>{t('gdrive.fs.login-message')}</span>)\n            });\n        }\n    }\n\n    render() {\n        const {path, files, loading, currentEntry} = this.state;\n        const mode = this.props.mode || 'open';\n        const fullPath = _.reduce(path, (acc, folder) => acc += folder.name + '/', '');\n        const isRoot = fullPath === rootPath;\n        const isLoading = loading;\n        const entryRestriction = mode === 'save' ? 'folder' : 'file';\n\n        return (\n            <div className=\"fade-curtain\">\n                <div className=\"fs__popup\">\n                    <span\n                        className=\"close\"\n                        onClick={() => this.close()}\n                    >\n                        \n                    </span>\n                    <div className=\"fs__area\">\n                        <div className=\"fs__top\">\n                            <div className=\"fs__top--path\">\n                                {fullPath}&lrm;\n                            </div>\n                            <div\n                                className={`fs__top--back fs__top--back${isRoot || isLoading ? '--disabled' : '--enabled'}`}\n                                title={t('gdrive.fs.upper')}\n                                onClick={isRoot ? _.noop : () => this.goUp()}\n                            >\n                                <span\n                                    className=\"iconify\"\n                                    data-icon=\"entypo:back\"\n                                />\n                            </div>\n                        </div>\n                        <div className={\n                            `fs__content fs__content${isLoading || files.length === 0 ? '--center' : ''}`\n                        }>\n                            {isLoading ? (\n                                <Spinner/>\n                            ) : (\n                                <FileTree\n                                    files={files}\n                                    currentEntry={currentEntry}\n                                    setCurrentEntry={(entry) => this.setCurrentEntry(entry)}\n                                    goDeep={(folder) => this.goDeep(folder)}\n                                    warning={this.state.warningMsg}\n                                />\n                            )}\n                        </div>\n                        <div className=\"fs__bottom\">\n                            {this.props.mode === 'open' ?\n                                (\n                                    <Button\n                                        text={'main-menu.options.file.open'}\n                                        type=\"primary\"\n                                        className={'fs__bottom--close'}\n                                        onClick={() => this.openFile()}\n                                        disabled={currentEntry.type !== entryRestriction}\n                                    />\n                                ) : (\n                                    <Button\n                                        text={'main-menu.options.file.save'}\n                                        type=\"primary\"\n                                        className={'fs__bottom--close'}\n                                        onClick={() => this.saveFile()}\n                                        disabled={currentEntry.type !== entryRestriction || !driveManager.isLoggedIn}\n                                    />\n                                )\n                            }\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default FileBrowser;\n","import React from 'react';\nimport fileManager from \"./services/fileManager\";\nimport driveManager from './services/driveManager';\nimport LoadingPopup from \"./components/loading-popup/loading-popup\";\nimport DrivePopup from './components/drive-popup/drive-popup';\nimport MainMenu from \"./components/main-menu/main-menu\";\nimport ActionPanel from \"./components/action-panel/action-panel\";\nimport SideMenu from \"./components/side-menu/side-menu\";\nimport Notification from './components/notification/notification';\nimport {GROUPS} from \"./consts/groups.consts\";\nimport Board from \"./components/board/board\";\nimport FileInput from \"./components/file-input/file-input\";\nimport FileBrowser from './components/file-browser/file-browser';\nimport PubSub from \"./services/pubSub\";\nimport {EVENT} from \"./consts/events.consts\";\nimport _ from 'lodash';\nimport i18next from 'i18next';\n\nconst t = (str) => i18next.t(str);\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        _.forEach(_.values(EVENT), (val) => PubSub.createEvent(val));\n        this.state = {\n            currentEl: null,\n            boardState: null,\n            isLoading: false,\n            loadingStatus: '',\n            isDrivePopupVisible: false,\n            fsOpened: false,\n            fsMode: '',\n            language: 'en',\n            notice: {\n                title: '',\n                description: '',\n                type: null,\n                visible: false\n            },\n            data: {\n                schemeName: 'Scheme',\n                elements: null,\n                wires: null\n            }\n        };\n        this.notificationCounter = 0;\n        this.save = this.save.bind(this);\n        this.newFile = this.newFile.bind(this);\n        this.manageGdrive = this.manageGdrive.bind(this);\n        this.toggleFs = this.toggleFs.bind(this);\n        this.options = [\n            {\n                name: 'main-menu.file',\n                suboptions: [\n                    {name: 'main-menu.options.file.new', action: this.newFile},\n                    {name: 'main-menu.options.file.open', action: this.open},\n                    {name: 'main-menu.options.file.save', action: this.save},\n                ]\n            },\n            {\n                name: 'Google Drive',\n                suboptions: [\n                    {name: \"gdrive.manage\", action: this.manageGdrive},\n                    {name: 'main-menu.options.file.open', action: () => this.toggleFs(true, 'open')},\n                    {name: 'main-menu.options.file.save', action: () => this.toggleFs(true, 'save')}\n                ]\n            },\n            {\n                name: 'main-menu.export',\n                suboptions: [\n                    {name: 'main-menu.options.save-as-svg', action: () => fileManager.saveAsSVG(this.state.data.schemeName)},\n                    {name: 'main-menu.options.save-as-png', action: () => fileManager.saveAsPNG(this.state.data.schemeName)},\n                ]\n            },\n        ];\n\n        this.handleChange = this.handleChange.bind(this);\n        this.updateData = this.updateData.bind(this);\n        this.setSchemeName = this.setSchemeName.bind(this);\n        this.toggleLoading = this.toggleLoading.bind(this);\n        this.showNotice = this.showNotice.bind(this);\n        PubSub.subscribe(EVENT.SET_BOARD_STATE, this.setBoardState.bind(this));\n        PubSub.subscribe(EVENT.UPDATE_DATA, this.updateData.bind(this));\n        PubSub.subscribe(EVENT.TOGGLE_LOADING, (data) => {\n           const {toggle, status} = data;\n\n           this.toggleLoading(toggle, status);\n        });\n        PubSub.subscribe(EVENT.SHOW_NOTICE, this.showNotice.bind(this));\n        PubSub.subscribe(EVENT.TOGGLE_GDRIVE_POPUP, this.manageGdrive);\n        PubSub.subscribe(EVENT.TOGGLE_FILE_BROWSER, (data) => {\n            const {state, mode} = data;\n\n            this.toggleFs(state, mode);\n        });\n        PubSub.subscribe(EVENT.SET_CURRENT_ELEMENT, this.handleChange.bind(this));\n    }\n\n    manageGdrive(val = true) {\n        this.setState({\n            isDrivePopupVisible: val,\n        });\n    }\n\n    open() {\n        fileManager.openFile();\n    }\n\n    toggleFs(state = true, mode) {\n        this.setState({\n            fsOpened: state,\n            fsMode: mode\n        });\n    }\n\n    componentDidMount() {\n        driveManager\n            .checkSession()\n            .subscribe(\n                (data) => {\n                    if(data.response.status === 'success') {\n                        this.showNotice({\n                            description: 'gdrive.success.login',\n                            type: 'success'\n                        });\n                    }\n                },\n                () => {\n                    this.showNotice({\n                        title: 'warning',\n                        description: 'gdrive.error.unknown',\n                        type: 'warning'\n                    });\n                }\n            );\n    }\n\n    newFile() {\n        this.setState({\n            data: {\n                schemeName: 'Scheme',\n                elements: null,\n                wires: null\n            }\n        });\n        fileManager.newFile();\n    }\n\n    save() {\n        const data = this.state.data;\n\n        fileManager.saveFile(data);\n    }\n\n    handleChange(curEl) {\n        this.setState({\n            currentEl: curEl,\n        });\n    };\n\n    toggleLoading(toggle, status = 'loading') {\n        this.setState({\n            isLoading: toggle,\n            loadingStatus: t(status || 'loading')\n        });\n    }\n\n    setBoardState(state) {\n        this.setState({boardState: state});\n    }\n\n    setSchemeName(schemeName) {\n        const {wires, elements} = this.state.data;\n\n        this.setState({\n            data: {\n                schemeName,\n                elements,\n                wires\n            }\n        });\n    }\n\n    updateData(data) {\n        this.setState({data});\n    }\n\n    showNotice(params) {\n        const {title, description, type} = params;\n\n        this.setState({\n            notice: {\n                type,\n                title,\n                description,\n                id: this.notificationCounter++,\n                visible: true\n            }\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"app\">\n                {this.state.notice.visible ? (\n                    <Notification\n                        title={this.state.notice.title}\n                        description={this.state.notice.description}\n                        type={this.state.notice.type}\n                        id={this.state.notice.id}\n                    />\n                ) : null}\n                {\n                    this.state.fsOpened ?\n                    <FileBrowser\n                        mode={this.state.fsMode}\n                        schemeData={this.state.data}\n                    />\n                    : null\n                }\n                <LoadingPopup\n                    isVisible={this.state.isLoading}\n                    status={this.state.loadingStatus}\n                />\n                <DrivePopup\n                    isVisible={this.state.isDrivePopupVisible}\n                />\n                <MainMenu\n                    options={this.options}\n                    setSchemeName={this.setSchemeName}\n                    schemeName={this.state.data.schemeName}\n                />\n                <ActionPanel/>\n                <div className=\"drawing-area\">\n                    <SideMenu\n                        className=\"side-menu\"\n                        groups={GROUPS}\n                        currentEl={this.state.currentEl}\n                    />\n                    <Board\n                        currentEl={this.state.currentEl}\n                        state={this.state.boardState}\n                        data={this.state.data}\n                    />\n                </div>\n                <FileInput/>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.less';\nimport './services/i18n';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}